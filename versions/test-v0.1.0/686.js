"use strict";(globalThis["webpackChunktest"]=globalThis["webpackChunktest"]||[]).push([["686"],{4421:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:()=>emotion_styled_browser_esm_newStyled});var esm_extends=__webpack_require__(6019);var emotion_react_browser_esm_js_=__webpack_require__(3315);var emotion_serialize_esm=__webpack_require__(8871);var emotion_use_insertion_effect_with_fallbacks_browser_esm=__webpack_require__(7278);var emotion_utils_browser_esm=__webpack_require__(444);var index_js_eager_=__webpack_require__(8234);var emotion_is_prop_valid_esm=__webpack_require__(1068);var isDevelopment=false;var testOmitPropsOnStringTag=emotion_is_prop_valid_esm.Z;var emotion_styled_base_browser_esm_testOmitPropsOnComponent=function(key){return"theme"!==key};var emotion_styled_base_browser_esm_getDefaultShouldForwardProp=function(tag){return"string"==typeof tag&&tag.charCodeAt(0)>96?testOmitPropsOnStringTag:emotion_styled_base_browser_esm_testOmitPropsOnComponent};var emotion_styled_base_browser_esm_composeShouldForwardProps=function(tag,options,isReal){var shouldForwardProp;if(options){var optionsShouldForwardProp=options.shouldForwardProp;shouldForwardProp=tag.__emotion_forwardProp&&optionsShouldForwardProp?function(propName){return tag.__emotion_forwardProp(propName)&&optionsShouldForwardProp(propName)}:optionsShouldForwardProp}if("function"!=typeof shouldForwardProp&&isReal)shouldForwardProp=tag.__emotion_forwardProp;return shouldForwardProp};var emotion_styled_base_browser_esm_Insertion=function(_ref){var cache=_ref.cache,serialized=_ref.serialized,isStringTag=_ref.isStringTag;(0,emotion_utils_browser_esm.hC)(cache,serialized,isStringTag);(0,emotion_use_insertion_effect_with_fallbacks_browser_esm.L)(function(){return(0,emotion_utils_browser_esm.My)(cache,serialized,isStringTag)});return null};var emotion_styled_base_browser_esm_createStyled=function createStyled(tag,options){var isReal=tag.__emotion_real===tag;var baseTag=isReal&&tag.__emotion_base||tag;var identifierName;var targetClassName;if(void 0!==options){identifierName=options.label;targetClassName=options.target}var shouldForwardProp=emotion_styled_base_browser_esm_composeShouldForwardProps(tag,options,isReal);var defaultShouldForwardProp=shouldForwardProp||emotion_styled_base_browser_esm_getDefaultShouldForwardProp(baseTag);var shouldUseAs=!defaultShouldForwardProp("as");return function(){var args=arguments;var styles=isReal&&void 0!==tag.__emotion_styles?tag.__emotion_styles.slice(0):[];if(void 0!==identifierName)styles.push("label:"+identifierName+";");if(null==args[0]||void 0===args[0].raw)styles.push.apply(styles,args);else{var templateStringsArr=args[0];styles.push(templateStringsArr[0]);var len=args.length;var i=1;for(;i<len;i++)styles.push(args[i],templateStringsArr[i])}var Styled=(0,emotion_react_browser_esm_js_.withEmotionCache)(function(props,cache,ref){var FinalTag=shouldUseAs&&props.as||baseTag;var className="";var classInterpolations=[];var mergedProps=props;if(null==props.theme){mergedProps={};for(var key in props)mergedProps[key]=props[key];mergedProps.theme=index_js_eager_.useContext(emotion_react_browser_esm_js_.ThemeContext)}if("string"==typeof props.className)className=(0,emotion_utils_browser_esm.fp)(cache.registered,classInterpolations,props.className);else if(null!=props.className)className=props.className+" ";var serialized=(0,emotion_serialize_esm.O)(styles.concat(classInterpolations),cache.registered,mergedProps);className+=cache.key+"-"+serialized.name;if(void 0!==targetClassName)className+=" "+targetClassName;var finalShouldForwardProp=shouldUseAs&&void 0===shouldForwardProp?emotion_styled_base_browser_esm_getDefaultShouldForwardProp(FinalTag):defaultShouldForwardProp;var newProps={};for(var _key in props)if(!shouldUseAs||"as"!==_key){if(finalShouldForwardProp(_key))newProps[_key]=props[_key]}newProps.className=className;if(ref)newProps.ref=ref;return /*#__PURE__*/index_js_eager_.createElement(index_js_eager_.Fragment,null,/*#__PURE__*/index_js_eager_.createElement(emotion_styled_base_browser_esm_Insertion,{cache:cache,serialized:serialized,isStringTag:"string"==typeof FinalTag}),/*#__PURE__*/index_js_eager_.createElement(FinalTag,newProps))});Styled.displayName=void 0!==identifierName?identifierName:"Styled("+("string"==typeof baseTag?baseTag:baseTag.displayName||baseTag.name||"Component")+")";Styled.defaultProps=tag.defaultProps;Styled.__emotion_real=Styled;Styled.__emotion_base=baseTag;Styled.__emotion_styles=styles;Styled.__emotion_forwardProp=shouldForwardProp;Object.defineProperty(Styled,"toString",{value:function(){if(void 0===targetClassName&&isDevelopment)return"NO_COMPONENT_SELECTOR";return"."+targetClassName}});Styled.withComponent=function(nextTag,nextOptions){var newStyled=createStyled(nextTag,(0,esm_extends.Z)({},options,nextOptions,{shouldForwardProp:emotion_styled_base_browser_esm_composeShouldForwardProps(Styled,nextOptions,true)}));return newStyled.apply(void 0,styles)};return Styled}};var tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];var emotion_styled_browser_esm_newStyled=emotion_styled_base_browser_esm_createStyled.bind(null);tags.forEach(function(tagName){emotion_styled_browser_esm_newStyled[tagName]=emotion_styled_browser_esm_newStyled(tagName)})},7278:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{L:()=>useInsertionEffectAlwaysWithSyncFallback,j:()=>useInsertionEffectWithLayoutFallback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8234);var syncFallback=function(create){return create()};var useInsertionEffect=react__WEBPACK_IMPORTED_MODULE_0__["useInsertionEffect"]?react__WEBPACK_IMPORTED_MODULE_0__["useInsertionEffect"]:false;var useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback;var useInsertionEffectWithLayoutFallback=useInsertionEffect||react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect},6019:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:()=>_extends});function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}},2128:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{useIcon:()=>Dt,getIconByEntity:()=>index_CzNGKXJS_O,subscribeDeviceRegistry:()=>devices_n,useCamera:()=>useCamera_se,getCssColorValue:()=>colors_k,LIGHT_COLOR_MODES:()=>autogenerated_types_by_domain_r,hexBlend:()=>hex_f,CAMERA_SUPPORT_STREAM:()=>constants_R,localizeStateMessage:()=>logbook_P,formatDate:()=>date_C,getRGBContrastRatio:()=>rgb_c,subscribeEntityRegistry:()=>entities_g,lightIsInColorMode:()=>light_c,computeDomainTitle:()=>computeDomainTitle_l,CONTINUOUS_DOMAINS:()=>logbook_M,luminosity:()=>rgb_s,lightSupportsColor:()=>light_d,STREAM_TYPE_HLS:()=>constants_t,subscribeAreaRegistry:()=>areas_n,OFF:()=>entity_o,isNumericFromAttributes:()=>number_n,loadTokens:()=>token_storage_c,computeAttributeValueDisplay:()=>computeAttributeDisplay_A,rgbww2rgb:()=>convert_light_color_k,formatNumber:()=>number_c,useDevice:()=>useDevice_,hex2rgb:()=>convert_color_S,createService:()=>useService_a,TEMPERATURE_ATTRIBUTES:()=>computeAttributeDisplay_f,MAX_IMAGE_WIDTH:()=>constants_,DOMAIN_ATTRIBUTES_UNITS:()=>computeAttributeDisplay_T,computeStateDisplay:()=>computeStateDisplay_K,useIconByEntity:()=>index_CzNGKXJS_Ot,CAMERA_ORIENTATIONS:()=>constants_T,labBrighten:()=>lab_o,stateColorBrightness:()=>utils_colors_e,UNIT_F:()=>entity_I,computeCssColor:()=>compute_color_n,formatDuration:()=>date_d,useLogs:()=>useLogs_G,UNIT_C:()=>entity_S,rgb2hs:()=>convert_color_Z,createHistoricState:()=>logbook_U,toReadableString:()=>string_a,HassContext:()=>HassContext_h,useEntity:()=>index_CzNGKXJS_rt,UNAVAILABLE_STATES:()=>entity_T,useIconByDomain:()=>index_CzNGKXJS_Nt,useService:()=>useService_x,useHass:()=>oe,timeAgo:()=>time_ago_f,HassConnect:()=>Ue,rgbContrast:()=>rgb_u,batteryIconByLevel:()=>battery_b,updateLocales:()=>st,useConfig:()=>useConfig_M,formatTime:()=>date_O,useHaStatus:()=>useHaStatus_g,checkValidDate:()=>date_L,THEME_COLORS:()=>compute_color_r,formatDateTime:()=>date_T,millisecondsToDuration:()=>date_u,getSupportedForecastTypes:()=>helpers_C,lightSupportsBrightness:()=>light_i,localize:()=>ae,useSubscribeEntity:()=>useSubscribeEntity_k,DOMAIN_ATTRIBUTES_FORMATERS:()=>computeAttributeDisplay_g,OFF_STATES:()=>entity_N,isTimestamp:()=>date_E,CAMERA_SUPPORT_ON_OFF:()=>constants_E,ASPECT_RATIO_DEFAULT:()=>constants_A,COLORS:()=>colors_f,UNAVAILABLE:()=>entity_n,useLightBrightness:()=>useLightBrightness_M,computeDomain:()=>computeDomain_m,expandHex:()=>hex_a,getDefaultFormatOptions:()=>number_m,getWeatherUnit:()=>computeAttributeDisplay_v,isDate:()=>date_h,rgb2hex:()=>convert_color_f,hsv2rgb:()=>convert_color_k,round:()=>number_s,supportsFeatureFromAttributes:()=>supports_feature_r,isUnavailableState:()=>entity_l,stateActive:()=>entity_w,getColorByIndex:()=>colors_e,useLocales:()=>Ie,DOMAINS_WITH_DYNAMIC_PICTURE:()=>entity_,lab2hex:()=>Y,locales:()=>locales_m,UNIT_TO_MILLISECOND_CONVERT:()=>date_I,isNumericState:()=>number_a,UNKNOWN:()=>entity_t,hs2rgb:()=>convert_color_j,localizeTriggerSource:()=>logbook_H,rgb2hsv:()=>convert_color_d,saveTokens:()=>token_storage_a,temperature2rgb:()=>convert_light_color_I,useHistory:()=>useHistory_U,ON:()=>entity_A,labDarken:()=>lab_e,useLightTemperature:()=>useLightTemperature_n,useLowDevices:()=>useLowDevices_O,getNumberFormatOptions:()=>number_u,subscribeLogbook:()=>logbook_D,useTemplate:()=>useTemplate_x,lab2rgb:()=>convert_color_I,coordinates:()=>coordinates_E,DEFAULT_STATES:()=>entity_i,lightSupportsColorMode:()=>light_u,rgb2lab:()=>convert_color_X,rgbw2rgb:()=>B,STREAM_TYPE_WEB_RTC:()=>constants_c,computeStateDisplayFromEntityAttributes:()=>computeStateDisplay_g,isOffState:()=>entity_U,useLightColor:()=>useLightColor_L,useLocale:()=>xe,useAreas:()=>useAreas_L,useWeather:()=>useWeather_J,getLightCurrentModeRgbColor:()=>light_p});var lodash=__webpack_require__(6486);const convert_light_color_=2700,convert_light_color_p=6500,convert_light_color_I=t=>{const r=t/100;return[convert_light_color_R(r),convert_light_color_T(r),convert_light_color_A(r)]},convert_light_color_R=t=>{if(t<=66)return 255;const r=329.698727446*(t-60)**-.1332047592;return(0,lodash.clamp)(r,0,255)},convert_light_color_T=t=>{let r;return t<=66?r=99.4708025861*Math.log(t)-161.1195681661:r=288.1221695283*(t-60)**-.0755148492,(0,lodash.clamp)(r,0,255)},convert_light_color_A=t=>{if(t>=66)return 255;if(t<=19)return 0;const r=138.5177312231*Math.log(t-10)-305.0447927307;return(0,lodash.clamp)(r,0,255)},convert_light_color_h=(t,r)=>{const e=Math.max(...t),o=Math.max(...r);let n;return 0===o?n=0:n=e/o,r.map(c=>Math.round(c*n))},convert_light_color_K=t=>Math.floor(1e6/t),convert_light_color_u=t=>Math.floor(1e6/t),convert_light_color_k=(t,r,e)=>{const[o,n,c,a,s]=t,w=convert_light_color_u(r??convert_light_color_),g=convert_light_color_u(e??convert_light_color_p),b=w-g;let l;try{l=s/(a+s)}catch(L){console.log("Error:",L),l=.5}const M=g+l*b,d=M?convert_light_color_K(M):0,[f,x,v]=convert_light_color_I(d),i=Math.max(a,s)/255,E=[o+f*i,n+x*i,c+v*i];return convert_light_color_h([o,n,c,a,s],E)},B=t=>{const[r,e,o,n]=t,c=[r+n,e+n,o+n];return convert_light_color_h([r,e,o,n],c)};const hex_a=t=>{if(t=t.replace("#",""),6===t.length)return t;let r="";for(const e of t)r+=e+e;return r},hex_f=(t,r,e=50)=>{let l="";t=hex_a(t),r=hex_a(r);for(let n=0;n<=5;n+=2){const u=parseInt(t.substr(n,2),16),s=parseInt(r.substr(n,2),16);let o=Math.floor(s+e/100*(u-s)).toString(16);for(;o.length<2;)o="0"+o;l+=o}return`#${l}`};const convert_color_b=t=>{const s=Math.round(Math.min(Math.max(t,0),255)).toString(16);return 1===s.length?`0${s}`:s},convert_color_S=t=>(t=hex_a(t),[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]),convert_color_f=t=>`#${convert_color_b(t[0])}${convert_color_b(t[1])}${convert_color_b(t[2])}`,convert_color_h=.95047,convert_color_i=1,convert_color_l=1.08883,convert_color_m=.137931034,convert_color_v=.206896552,convert_color_y=.12841855,convert_color_N=.008856452,convert_color_a=t=>(t/=255,t<=.04045?t/12.92:((t+.055)/1.055)**2.4),convert_color_g=t=>t>convert_color_N?t**(1/3):t/convert_color_y+convert_color_m,convert_color_u=t=>255*(t<=.00304?12.92*t:1.055*t**(1/2.4)-.055),convert_color_x=t=>t>convert_color_v?t*t*t:convert_color_y*(t-convert_color_m),convert_color_$=t=>{let[s,r,o]=t;s=convert_color_a(s),r=convert_color_a(r),o=convert_color_a(o);const n=convert_color_g((.4124564*s+.3575761*r+.1804375*o)/convert_color_h),c=convert_color_g((.2126729*s+.7151522*r+.072175*o)/convert_color_i),e=convert_color_g((.0193339*s+.119192*r+.9503041*o)/convert_color_l);return[n,c,e]},convert_color_X=t=>{const[s,r,o]=convert_color_$(t),n=116*r-16;return[n<0?0:n,500*(s-r),200*(r-o)]},convert_color_I=t=>{const[s,r,o]=t;let n=(s+16)/116,c=isNaN(r)?n:n+r/500,e=isNaN(o)?n:n-o/200;n=convert_color_i*convert_color_x(n),c=convert_color_h*convert_color_x(c),e=convert_color_l*convert_color_x(e);const z=convert_color_u(3.2404542*c-1.5371385*n-.4985314*e),M=convert_color_u(-.969266*c+1.8760108*n+.041556*e),p=convert_color_u(.0556434*c-.2040259*n+1.0572252*e);return[z,M,p]},Y=t=>{const s=convert_color_I(t);return convert_color_f(s)},convert_color_d=t=>{const[s,r,o]=t,n=Math.max(s,r,o),c=n-Math.min(s,r,o),e=c&&(n===s?(r-o)/c:n===r?2+(o-s)/c:4+(s-r)/c);return[60*(e<0?e+6:e),n&&c/n,n]},convert_color_k=t=>{const[s,r,o]=t,n=c=>{const e=(c+s/60)%6;return o-o*r*Math.max(Math.min(e,4-e,1),0)};return[n(5),n(3),n(1)]},convert_color_Z=t=>convert_color_d(t).slice(0,2),convert_color_j=t=>convert_color_k([t[0],t[1],255]);const colors_f=["#44739e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function colors_e(d){return colors_f[d%colors_f.length]}const compute_color_r=/* @__PURE__ */new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function compute_color_n(e){return compute_color_r.has(e)?`var(--${e}-color)`:e}const rgb_s=r=>{const t=[0,0,0];for(let n=0;n<r.length;n++){const o=r[n]/255;t[n]=o<=.03928?o/12.92:((o+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},rgb_u=(r,t)=>{const n=rgb_s(r),o=rgb_s(t);return n>o?(n+.05)/(o+.05):(o+.05)/(n+.05)},rgb_c=(r,t)=>Math.round((rgb_u(r,t)+Number.EPSILON)*100)/100;const utils_colors_e=s=>{if(s&&s.attributes&&s.attributes.brightness&&!s.entity_id.startsWith("plant")){const r=s.attributes.brightness,t=Number(Number((r+245)/5).toFixed(0));return{raw:t,css:`brightness(${t}%)`}}return{css:"brightness(100%)",raw:100}};const lab_e=(n,t=1)=>[n[0]-18*t,n[1],n[2]],lab_o=(n,t=1)=>lab_e(n,-t);const autogenerated_types_by_domain_r={UNKNOWN:"unknown",ONOFF:"onoff",BRIGHTNESS:"brightness",COLOR_TEMP:"color_temp",HS:"hs",XY:"xy",RGB:"rgb",RGBW:"rgbw",RGBWW:"rgbww",WHITE:"white"};const light_s=[autogenerated_types_by_domain_r.HS,autogenerated_types_by_domain_r.XY,autogenerated_types_by_domain_r.RGB,autogenerated_types_by_domain_r.RGBW,autogenerated_types_by_domain_r.RGBWW],light_e=[...light_s,autogenerated_types_by_domain_r.COLOR_TEMP,autogenerated_types_by_domain_r.BRIGHTNESS,autogenerated_types_by_domain_r.WHITE],light_u=(o,r)=>o.attributes.supported_color_modes?.includes(r)||!1,light_c=o=>o.attributes.color_mode&&light_s.includes(o.attributes.color_mode)||!1,light_d=o=>o.attributes.supported_color_modes?.some(r=>light_s.includes(r))||!1,light_i=o=>o.attributes.supported_color_modes?.some(r=>light_e.includes(r))||!1,light_p=o=>o.attributes.color_mode===autogenerated_types_by_domain_r.RGBWW?o.attributes.rgbww_color:o.attributes.color_mode===autogenerated_types_by_domain_r.RGBW?o.attributes.rgbw_color:o.attributes.rgb_color;function colors_p(r){if(r.attributes){if("hs_color"in r.attributes&&null!==r.attributes.hs_color)return convert_color_j([r.attributes.hs_color[0],r.attributes.hs_color[1]/100]);if("color_temp_kelvin"in r.attributes&&null!==r.attributes.color_temp_kelvin)return convert_light_color_I(r.attributes.color_temp_kelvin);if("rgb_color"in r.attributes&&null!==r.attributes.rgb_color)return r.attributes.rgb_color;if("rgbw_color"in r.attributes&&null!==r.attributes.rgbw_color)return B(r.attributes.rgbw_color);if("rgbww_color"in r.attributes&&null!==r.attributes.rgbww_color)return convert_light_color_k(r.attributes.rgbww_color,r.attributes.min_color_temp_kelvin,r.attributes.max_color_temp_kelvin);if(light_i(r))return convert_light_color_I(2e3)}return null}function colors_k(r){const o=r?colors_p(r):null,t=o?o.map(c=>c.toFixed(0)).map(Number):null,s=o?convert_color_f(o):"var(--ha-A400)",u=t?`rgba(${t.join(", ")})`:"var(--ha-S500-contrast)",b=t?`rgba(${[...t,.35].join(", ")})`:"var(--ha-A200)",{css:a,raw:e}=utils_colors_e(r);return{color:o||[33,33,33],hexColor:s,rgbColor:u,rgbaColor:b,brightness:a,brightnessValue:e}}const computeDomain_m=o=>(0,lodash.snakeCase)(o.substr(0,o.indexOf(".")));var jsx_runtime=__webpack_require__(5893);var index_js_eager_=__webpack_require__(3257);var emotion_cache_browser_esm=__webpack_require__(6300);var emotion_utils_browser_esm=__webpack_require__(444);var emotion_serialize_esm=__webpack_require__(8871);var react_is=__webpack_require__(9864);const ERR_CANNOT_CONNECT=1;const ERR_INVALID_AUTH=2;const ERR_CONNECTION_LOST=3;const ERR_HASS_HOST_REQUIRED=4;const ERR_INVALID_HTTPS_TO_HTTP=5;const ERR_INVALID_AUTH_CALLBACK=6;function parseQuery(queryString){const query={};const items=queryString.split("&");for(let i=0;i<items.length;i++){const item=items[i].split("=");const key=decodeURIComponent(item[0]);const value=item.length>1?decodeURIComponent(item[1]):void 0;query[key]=value}return query}const atLeastHaVersion=(version,major,minor,patch)=>{const[haMajor,haMinor,haPatch]=version.split(".",3);return Number(haMajor)>major||Number(haMajor)===major&&(void 0===patch?Number(haMinor)>=minor:Number(haMinor)>minor)||void 0!==patch&&Number(haMajor)===major&&Number(haMinor)===minor&&Number(haPatch)>=patch};const genClientId=()=>`${location.protocol}//${location.host}/`;const genExpires=expires_in=>1e3*expires_in+Date.now();function genRedirectUrl(){const{protocol,host,pathname,search}=location;return`${protocol}//${host}${pathname}${search}`}function genAuthorizeUrl(hassUrl,clientId,redirectUrl,state){let authorizeUrl=`${hassUrl}/auth/authorize?response_type=code&redirect_uri=${encodeURIComponent(redirectUrl)}`;if(null!==clientId)authorizeUrl+=`&client_id=${encodeURIComponent(clientId)}`;if(state)authorizeUrl+=`&state=${encodeURIComponent(state)}`;return authorizeUrl}function redirectAuthorize(hassUrl,clientId,redirectUrl,state){redirectUrl+=(redirectUrl.includes("?")?"&":"?")+"auth_callback=1";document.location.href=genAuthorizeUrl(hassUrl,clientId,redirectUrl,state)}async function tokenRequest(hassUrl,clientId,data){const l="undefined"!=typeof location&&location;if(l&&"https:"===l.protocol){const a=document.createElement("a");a.href=hassUrl;if("http:"===a.protocol&&"localhost"!==a.hostname)throw ERR_INVALID_HTTPS_TO_HTTP}const formData=new FormData;if(null!==clientId)formData.append("client_id",clientId);Object.keys(data).forEach(key=>{formData.append(key,data[key])});const resp=await fetch(`${hassUrl}/auth/token`,{method:"POST",credentials:"same-origin",body:formData});if(!resp.ok)throw 400===resp.status||403===resp.status?ERR_INVALID_AUTH:new Error("Unable to fetch tokens");const tokens=await resp.json();tokens.hassUrl=hassUrl;tokens.clientId=clientId;tokens.expires=genExpires(tokens.expires_in);return tokens}function fetchToken(hassUrl,clientId,code){return tokenRequest(hassUrl,clientId,{code,grant_type:"authorization_code"})}function encodeOAuthState(state){return btoa(JSON.stringify(state))}function decodeOAuthState(encoded){return JSON.parse(atob(encoded))}class Auth{constructor(data,saveTokens){this.data=data;this._saveTokens=saveTokens}get wsUrl(){return`ws${this.data.hassUrl.substr(4)}/api/websocket`}get accessToken(){return this.data.access_token}get expired(){return Date.now()>this.data.expires}async refreshAccessToken(){if(!this.data.refresh_token)throw new Error("No refresh_token");const data=await tokenRequest(this.data.hassUrl,this.data.clientId,{grant_type:"refresh_token",refresh_token:this.data.refresh_token});data.refresh_token=this.data.refresh_token;this.data=data;if(this._saveTokens)this._saveTokens(data)}async revoke(){if(!this.data.refresh_token)throw new Error("No refresh_token to revoke");const formData=new FormData;formData.append("token",this.data.refresh_token);await fetch(`${this.data.hassUrl}/auth/revoke`,{method:"POST",credentials:"same-origin",body:formData});if(this._saveTokens)this._saveTokens(null)}}function createLongLivedTokenAuth(hassUrl,access_token){return new Auth({hassUrl,clientId:null,expires:Date.now()+1e11,refresh_token:"",access_token,expires_in:1e11})}async function getAuth(options={}){let data;let hassUrl=options.hassUrl;if(hassUrl&&"/"===hassUrl[hassUrl.length-1])hassUrl=hassUrl.substr(0,hassUrl.length-1);const clientId=void 0!==options.clientId?options.clientId:genClientId();const limitHassInstance=true===options.limitHassInstance;if(options.authCode&&hassUrl){data=await fetchToken(hassUrl,clientId,options.authCode);if(options.saveTokens)options.saveTokens(data)}if(!data){const query=parseQuery(location.search.substr(1));if("auth_callback"in query){const state=decodeOAuthState(query.state);if(limitHassInstance&&(state.hassUrl!==hassUrl||state.clientId!==clientId))throw ERR_INVALID_AUTH_CALLBACK;data=await fetchToken(state.hassUrl,state.clientId,query.code);if(options.saveTokens)options.saveTokens(data)}}if(!data&&options.loadTokens)data=await options.loadTokens();if(data)return new Auth(data,options.saveTokens);if(void 0===hassUrl)throw ERR_HASS_HOST_REQUIRED;redirectAuthorize(hassUrl,clientId,options.redirectUrl||genRedirectUrl(),encodeOAuthState({hassUrl,clientId}));return new Promise(()=>{})}function messages_auth(accessToken){return{type:"auth",access_token:accessToken}}function supportedFeatures(){return{type:"supported_features",id:1,features:{coalesce_messages:1}}}function messages_states(){return{type:"get_states"}}function messages_config(){return{type:"get_config"}}function services(){return{type:"get_services"}}function user(){return{type:"auth/current_user"}}function callService(domain,service,serviceData,target,returnResponse){const message={type:"call_service",domain,service,target,return_response:returnResponse};if(serviceData)message.service_data=serviceData;return message}function subscribeEvents(eventType){const message={type:"subscribe_events"};if(eventType)message.event_type=eventType;return message}function unsubscribeEvents(subscription){return{type:"unsubscribe_events",subscription}}function ping(){return{type:"ping"}}function error(code,message){return{type:"result",success:false,error:{code,message}}}const DEBUG=false;const MSG_TYPE_AUTH_REQUIRED="auth_required";const MSG_TYPE_AUTH_INVALID="auth_invalid";const MSG_TYPE_AUTH_OK="auth_ok";function createSocket(options){if(!options.auth)throw ERR_HASS_HOST_REQUIRED;const auth=options.auth;let authRefreshTask=auth.expired?auth.refreshAccessToken().then(()=>{authRefreshTask=void 0},()=>{authRefreshTask=void 0}):void 0;const url=auth.wsUrl;if(DEBUG)console.log("[Auth phase] Initializing",url);function connect(triesLeft,promResolve,promReject){if(DEBUG)console.log("[Auth Phase] New connection",url);const socket=new WebSocket(url);let invalidAuth=false;const closeMessage=()=>{socket.removeEventListener("close",closeMessage);if(invalidAuth){promReject(ERR_INVALID_AUTH);return}if(0===triesLeft){promReject(ERR_CANNOT_CONNECT);return}const newTries=-1===triesLeft?-1:triesLeft-1;setTimeout(()=>connect(newTries,promResolve,promReject),1e3)};const handleOpen=async event=>{try{if(auth.expired)await (authRefreshTask?authRefreshTask:auth.refreshAccessToken());socket.send(JSON.stringify(messages_auth(auth.accessToken)))}catch(err){invalidAuth=err===ERR_INVALID_AUTH;socket.close()}};const handleMessage=async event=>{const message=JSON.parse(event.data);if(DEBUG)console.log("[Auth phase] Received",message);switch(message.type){case MSG_TYPE_AUTH_INVALID:invalidAuth=true;socket.close();break;case MSG_TYPE_AUTH_OK:socket.removeEventListener("open",handleOpen);socket.removeEventListener("message",handleMessage);socket.removeEventListener("close",closeMessage);socket.removeEventListener("error",closeMessage);socket.haVersion=message.ha_version;if(atLeastHaVersion(socket.haVersion,2022,9))socket.send(JSON.stringify(supportedFeatures()));promResolve(socket);break;default:if(DEBUG){if(message.type!==MSG_TYPE_AUTH_REQUIRED)console.warn("[Auth phase] Unhandled message",message)}}};socket.addEventListener("open",handleOpen);socket.addEventListener("message",handleMessage);socket.addEventListener("close",closeMessage);socket.addEventListener("error",closeMessage)}return new Promise((resolve,reject)=>connect(options.setupRetry,resolve,reject))}const connection_DEBUG=false;class Connection{constructor(socket,options){this._handleMessage=event=>{let messageGroup=JSON.parse(event.data);if(!Array.isArray(messageGroup))messageGroup=[messageGroup];messageGroup.forEach(message=>{if(connection_DEBUG)console.log("Received",message);const info=this.commands.get(message.id);switch(message.type){case"event":if(info)info.callback(message.event);else{console.warn(`Received event for unknown subscription ${message.id}. Unsubscribing.`);this.sendMessagePromise(unsubscribeEvents(message.id)).catch(err=>{if(connection_DEBUG)console.warn(` Error unsubsribing from unknown subscription ${message.id}`,err)})}break;case"result":if(info){if(message.success){info.resolve(message.result);if(!("subscribe"in info))this.commands.delete(message.id)}else{info.reject(message.error);this.commands.delete(message.id)}}break;case"pong":if(info){info.resolve();this.commands.delete(message.id)}else console.warn(`Received unknown pong response ${message.id}`);break;default:if(connection_DEBUG)console.warn("Unhandled message",message)}})};this._handleClose=async()=>{const oldCommands=this.commands;this.commandId=1;this.oldSubscriptions=this.commands;this.commands=new Map;this.socket=void 0;oldCommands.forEach(info=>{if(!("subscribe"in info))info.reject(error(ERR_CONNECTION_LOST,"Connection lost"))});if(this.closeRequested)return;this.fireEvent("disconnected");const options=Object.assign(Object.assign({},this.options),{setupRetry:0});const reconnect=tries=>{setTimeout(async()=>{if(this.closeRequested)return;if(connection_DEBUG)console.log("Trying to reconnect");try{const socket=await options.createSocket(options);this._setSocket(socket)}catch(err){if(this._queuedMessages){const queuedMessages=this._queuedMessages;this._queuedMessages=void 0;for(const msg of queuedMessages)if(msg.reject)msg.reject(ERR_CONNECTION_LOST)}if(err===ERR_INVALID_AUTH)this.fireEvent("reconnect-error",err);else reconnect(tries+1)}},1e3*Math.min(tries,5))};if(this.suspendReconnectPromise){await this.suspendReconnectPromise;this.suspendReconnectPromise=void 0;this._queuedMessages=[]}reconnect(0)};this.options=options;this.commandId=2;this.commands=new Map;this.eventListeners=new Map;this.closeRequested=false;this._setSocket(socket)}get connected(){return void 0!==this.socket&&this.socket.readyState==this.socket.OPEN}_setSocket(socket){this.socket=socket;this.haVersion=socket.haVersion;socket.addEventListener("message",this._handleMessage);socket.addEventListener("close",this._handleClose);const oldSubscriptions=this.oldSubscriptions;if(oldSubscriptions){this.oldSubscriptions=void 0;oldSubscriptions.forEach(info=>{if("subscribe"in info&&info.subscribe)info.subscribe().then(unsub=>{info.unsubscribe=unsub;info.resolve()})})}const queuedMessages=this._queuedMessages;if(queuedMessages){this._queuedMessages=void 0;for(const queuedMsg of queuedMessages)queuedMsg.resolve()}this.fireEvent("ready")}addEventListener(eventType,callback){let listeners=this.eventListeners.get(eventType);if(!listeners){listeners=[];this.eventListeners.set(eventType,listeners)}listeners.push(callback)}removeEventListener(eventType,callback){const listeners=this.eventListeners.get(eventType);if(!listeners)return;const index=listeners.indexOf(callback);if(-1!==index)listeners.splice(index,1)}fireEvent(eventType,eventData){(this.eventListeners.get(eventType)||[]).forEach(callback=>callback(this,eventData))}suspendReconnectUntil(suspendPromise){this.suspendReconnectPromise=suspendPromise}suspend(){if(!this.suspendReconnectPromise)throw new Error("Suspend promise not set");if(this.socket)this.socket.close()}reconnect(force=false){if(!this.socket)return;if(!force){this.socket.close();return}this.socket.removeEventListener("message",this._handleMessage);this.socket.removeEventListener("close",this._handleClose);this.socket.close();this._handleClose()}close(){this.closeRequested=true;if(this.socket)this.socket.close()}async subscribeEvents(callback,eventType){return this.subscribeMessage(callback,subscribeEvents(eventType))}ping(){return this.sendMessagePromise(ping())}sendMessage(message,commandId){if(!this.connected)throw ERR_CONNECTION_LOST;if(connection_DEBUG)console.log("Sending",message);if(this._queuedMessages){if(commandId)throw new Error("Cannot queue with commandId");this._queuedMessages.push({resolve:()=>this.sendMessage(message)});return}if(!commandId)commandId=this._genCmdId();message.id=commandId;this.socket.send(JSON.stringify(message))}sendMessagePromise(message){return new Promise((resolve,reject)=>{if(this._queuedMessages){this._queuedMessages.push({reject,resolve:async()=>{try{resolve(await this.sendMessagePromise(message))}catch(err){reject(err)}}});return}const commandId=this._genCmdId();this.commands.set(commandId,{resolve,reject});this.sendMessage(message,commandId)})}async subscribeMessage(callback,subscribeMessage,options){if(this._queuedMessages)await new Promise((resolve,reject)=>{this._queuedMessages.push({resolve,reject})});let info;await new Promise((resolve,reject)=>{const commandId=this._genCmdId();info={resolve,reject,callback,subscribe:(null==options?void 0:options.resubscribe)!==false?()=>this.subscribeMessage(callback,subscribeMessage):void 0,unsubscribe:async()=>{if(this.connected)await this.sendMessagePromise(unsubscribeEvents(commandId));this.commands.delete(commandId)}};this.commands.set(commandId,info);try{this.sendMessage(subscribeMessage,commandId)}catch(err){}});return()=>info.unsubscribe()}_genCmdId(){return++this.commandId}}async function createConnection(options){const connOptions=Object.assign({setupRetry:0,createSocket:createSocket},options);const socket=await connOptions.createSocket(connOptions);const conn=new Connection(socket,connOptions);return conn}const getStates=connection=>connection.sendMessagePromise(messages_states());const getServices=connection=>connection.sendMessagePromise(services());const getConfig=connection=>connection.sendMessagePromise(messages_config());const getUser=connection=>connection.sendMessagePromise(user());const commands_callService=(connection,domain,service,serviceData,target,returnResponse)=>connection.sendMessagePromise(callService(domain,service,serviceData,target,returnResponse));const createStore=state=>{let listeners=[];function unsubscribe(listener){let out=[];for(let i=0;i<listeners.length;i++)if(listeners[i]===listener)listener=null;else out.push(listeners[i]);listeners=out}function setState(update,overwrite){state=overwrite?update:Object.assign(Object.assign({},state),update);let currentListeners=listeners;for(let i=0;i<currentListeners.length;i++)currentListeners[i](state)}return{get state(){return state},action(action){function apply(result){setState(result,false)}return function(){let args=[state];for(let i=0;i<arguments.length;i++)args.push(arguments[i]);let ret=action.apply(this,args);if(null!=ret)return ret instanceof Promise?ret.then(apply):apply(ret)}},setState,clearState(){state=void 0},subscribe(listener){listeners.push(listener);return()=>{unsubscribe(listener)}}}};const UNSUB_GRACE_PERIOD=5e3;const collection_DEBUG=false;const getCollection=(conn,key,fetchCollection,subscribeUpdates,options={unsubGrace:true})=>{if(conn[key])return conn[key];let active=0;let unsubProm;let unsubTimer;let store=createStore();const refresh=()=>{if(!fetchCollection)throw new Error("Collection does not support refresh");return fetchCollection(conn).then(state=>store.setState(state,true))};const refreshSwallow=()=>refresh().catch(err=>{if(conn.connected)throw err});const setupUpdateSubscription=()=>{if(void 0!==unsubTimer){if(collection_DEBUG)console.log(`Prevented unsubscribe for ${key}`);clearTimeout(unsubTimer);unsubTimer=void 0;return}if(collection_DEBUG)console.log(`Subscribing to ${key}`);if(subscribeUpdates)unsubProm=subscribeUpdates(conn,store);if(fetchCollection){conn.addEventListener("ready",refreshSwallow);refreshSwallow()}conn.addEventListener("disconnected",handleDisconnect)};const teardownUpdateSubscription=()=>{if(collection_DEBUG)console.log(`Unsubscribing from ${key}`);unsubTimer=void 0;if(unsubProm)unsubProm.then(unsub=>{unsub()});store.clearState();conn.removeEventListener("ready",refresh);conn.removeEventListener("disconnected",handleDisconnect)};const scheduleTeardownUpdateSubscription=()=>{if(collection_DEBUG)console.log(`Scheduling unsubscribing from ${key}`);unsubTimer=setTimeout(teardownUpdateSubscription,UNSUB_GRACE_PERIOD)};const handleDisconnect=()=>{if(unsubTimer){clearTimeout(unsubTimer);teardownUpdateSubscription()}};conn[key]={get state(){return store.state},refresh,subscribe(subscriber){active++;if(collection_DEBUG)console.log(`New subscriber for ${key}. Active subscribers: ${active}`);if(1===active)setupUpdateSubscription();const unsub=store.subscribe(subscriber);if(void 0!==store.state)setTimeout(()=>subscriber(store.state),0);return()=>{unsub();active--;if(collection_DEBUG)console.log(`Unsubscribe for ${key}. Active subscribers: ${active}`);if(!active)options.unsubGrace?scheduleTeardownUpdateSubscription():teardownUpdateSubscription()}}};return conn[key]};const createCollection=(key,fetchCollection,subscribeUpdates,conn,onChange)=>getCollection(conn,key,fetchCollection,subscribeUpdates).subscribe(onChange);function processComponentLoaded(state,event){if(void 0===state)return null;return{components:state.components.concat(event.data.component)}}const fetchConfig=conn=>getConfig(conn);const config_subscribeUpdates=(conn,store)=>Promise.all([conn.subscribeEvents(store.action(processComponentLoaded),"component_loaded"),conn.subscribeEvents(()=>fetchConfig(conn).then(config=>store.setState(config,true)),"core_config_updated")]).then(unsubs=>()=>unsubs.forEach(unsub=>unsub()));const configColl=conn=>getCollection(conn,"_cnf",fetchConfig,config_subscribeUpdates);const subscribeConfig=(conn,onChange)=>configColl(conn).subscribe(onChange);function processEvent(store,updates){const state=Object.assign({},store.state);if(updates.a)for(const entityId in updates.a){const newState=updates.a[entityId];let last_changed=new Date(1e3*newState.lc).toISOString();state[entityId]={entity_id:entityId,state:newState.s,attributes:newState.a,context:"string"==typeof newState.c?{id:newState.c,parent_id:null,user_id:null}:newState.c,last_changed:last_changed,last_updated:newState.lu?new Date(1e3*newState.lu).toISOString():last_changed}}if(updates.r)for(const entityId of updates.r)delete state[entityId];if(updates.c)for(const entityId in updates.c){let entityState=state[entityId];if(!entityState){console.warn("Received state update for unknown entity",entityId);continue}entityState=Object.assign({},entityState);const{"+":toAdd,"-":toRemove}=updates.c[entityId];const attributesChanged=(null==toAdd?void 0:toAdd.a)||(null==toRemove?void 0:toRemove.a);const attributes=attributesChanged?Object.assign({},entityState.attributes):entityState.attributes;if(toAdd){if(void 0!==toAdd.s)entityState.state=toAdd.s;if(toAdd.c){if("string"==typeof toAdd.c)entityState.context=Object.assign(Object.assign({},entityState.context),{id:toAdd.c});else entityState.context=Object.assign(Object.assign({},entityState.context),toAdd.c)}if(toAdd.lc)entityState.last_updated=entityState.last_changed=new Date(1e3*toAdd.lc).toISOString();else if(toAdd.lu)entityState.last_updated=new Date(1e3*toAdd.lu).toISOString();if(toAdd.a)Object.assign(attributes,toAdd.a)}if(null==toRemove?void 0:toRemove.a)for(const key of toRemove.a)delete attributes[key];if(attributesChanged)entityState.attributes=attributes;state[entityId]=entityState}store.setState(state,true)}const entities_subscribeUpdates=(conn,store)=>conn.subscribeMessage(ev=>processEvent(store,ev),{type:"subscribe_entities"});function legacyProcessEvent(store,event){const state=store.state;if(void 0===state)return;const{entity_id,new_state}=event.data;if(new_state)store.setState({[new_state.entity_id]:new_state});else{const newEntities=Object.assign({},state);delete newEntities[entity_id];store.setState(newEntities,true)}}async function legacyFetchEntities(conn){const states=await getStates(conn);const entities={};for(let i=0;i<states.length;i++){const state=states[i];entities[state.entity_id]=state}return entities}const legacySubscribeUpdates=(conn,store)=>conn.subscribeEvents(ev=>legacyProcessEvent(store,ev),"state_changed");const entitiesColl=conn=>atLeastHaVersion(conn.haVersion,2022,4,0)?getCollection(conn,"_ent",void 0,entities_subscribeUpdates):getCollection(conn,"_ent",legacyFetchEntities,legacySubscribeUpdates);const subscribeEntities=(conn,onChange)=>entitiesColl(conn).subscribe(onChange);const token_storage_o=typeof window<"u"?window.localStorage:null,token_storage_t=null!==token_storage_o;function token_storage_l(){token_storage_t?token_storage_o.removeItem("hassTokens"):console.error("Local storage not supported on this device.")}function token_storage_a(r){if(token_storage_t)try{token_storage_o.setItem("hassTokens",JSON.stringify(r))}catch(s){console.error("Failed to save tokens, probably due to private mode or storage full",s)}else console.error("Local storage not supported on this device.")}function token_storage_c(r,s=!0){if(!token_storage_t)return console.error("Local storage not supported on this device."),null;const n=token_storage_o.getItem("hassTokens");if(n)try{const e=JSON.parse(n);if(e.hassUrl===r)return e;if(s)return token_storage_l(),null}catch(e){return console.error("Error parsing stored tokens.",e?.message||""),token_storage_l(),null}return null}var index_module=__webpack_require__(4697);const locales_n=(e,a,o)=>{const c=e[a];return c?"function"==typeof c?c():Promise.resolve(c):new Promise((f,s)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+a+(a.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},locales_d={},locales_h=[{code:"af",hash:"14247a2bcb1b9b9c5c2966cc0eaeccf2",name:"Afrikaans"},{code:"ar",hash:"26a62c7251ed0498cb76bd1d548e07c3",name:"العربية"},{code:"bg",hash:"6b09fa419179a42b3b6e28e05ab6fbd6",name:"Български"},{code:"bn",hash:"6790cee1eca3dc1004fe2070972dc1e5",name:"বাংলা"},{code:"bs",hash:"0b5bc8d41fe38db0d9ea96c18b0b6f42",name:"Bosanski"},{code:"ca",hash:"a7ec5cfe45de3abf34c09af4752544d1",name:"Catal\xe0"},{code:"cs",hash:"348f5eb0ac8fdb2d3cd313a889b1dc71",name:"Čeština"},{code:"cy",hash:"5915dfc0205d59f5c2a24da737a03f54",name:"Cymraeg"},{code:"da",hash:"02d0cbf75d5eaa311c20990b8a83f459",name:"Dansk"},{code:"de",hash:"ae13a971749701e45cf0768d9f31ee85",name:"Deutsch"},{code:"el",hash:"aedf8a61790d24d44eef7b4d9eb52a8c",name:"Ελληνικά"},{code:"en",hash:"78671cd02dcd4c684a49184868cd09f7",name:"English"},{code:"en-GB",hash:"b180108c6ba3246ebd8cb11ed15cd52c",name:"English (GB)"},{code:"eo",hash:"16d471d3f53687b81d801a83fd70145b",name:"Esperanto"},{code:"es",hash:"732ff09b3fae53c8a03f9b54686be4e8",name:"Espa\xf1ol"},{code:"es-419",hash:"23e7764bfae3fd4e491b5042fc0b397f",name:"Espa\xf1ol (Latin America)"},{code:"et",hash:"ef1aec4de9330a6fb679b795ea0e3575",name:"Eesti"},{code:"eu",hash:"7ad43989ac35d43e21ca7319fc65bda5",name:"Euskara"},{code:"fa",hash:"9de96fd941e0e32503825ba2fe0f3f9c",name:"فارسی"},{code:"fi",hash:"770ee464bbd0125ca70c68f9fd42353e",name:"Suomi"},{code:"fy",hash:"8c4200852ea22718dcfd18d181c3e731",name:"Frysk"},{code:"fr",hash:"ca3b7b2e2f54b5dc832a914eea65f264",name:"Fran\xe7ais"},{code:"ga",hash:"af88afd08b682d1acd2549fd4b9adb17",name:"Gaeilge"},{code:"gl",hash:"e249d04536670ea55c94b46f27255ca2",name:"Galego"},{code:"gsw",hash:"471862efce404a3bf86c93729d5b327f",name:"Schwiizerd\xfctsch"},{code:"he",hash:"3830b1206fb408a8bc1285958765e04b",name:"עברית"},{code:"hi",hash:"7372a9c54617667563cc61a35bcc528f",name:"हिन्दी"},{code:"hr",hash:"1cf633216262f852b7a08b42874be63d",name:"Hrvatski"},{code:"hu",hash:"d247c7090c4bc254922dfd57f1fb09b4",name:"Magyar"},{code:"hy",hash:"6975461688d2598ce2111979d1d01056",name:"Հայերեն"},{code:"id",hash:"fd3c0def53488f14f0a436e28f83ba6e",name:"Indonesia"},{code:"it",hash:"116da93d7ebb77e85076a85ee00a0f4e",name:"Italiano"},{code:"is",hash:"fc5733b668e877ea779a799aab17ab2a",name:"\xcdslenska"},{code:"ja",hash:"b20ee6a24662d61ad788174f59768ef9",name:"日本語"},{code:"ka",hash:"24d4763f5226dece682f001d1a81dbda",name:"Kartuli"},{code:"ko",hash:"f61cf99049eef1f7bfc3f43002e82c2a",name:"한국어"},{code:"lb",hash:"603ecc882a805f45dbb6e199b3c87ec9",name:"L\xebtzebuergesch"},{code:"lt",hash:"19abea26dfa26b01e58458877f924cf0",name:"Lietuvių"},{code:"lv",hash:"592c73369594a376c95ac982db7dcc23",name:"Latviešu"},{code:"mk",hash:"91db793989e78fbedef76993bc84017d",name:"Македонски"},{code:"ml",hash:"542f52de14959d511dcc1c2ec0753b2f",name:"മലയാളം"},{code:"nl",hash:"7dc6a0a9ee073f5a200fd77d74e91273",name:"Nederlands"},{code:"nb",hash:"283a45baf59283f9695453ac76e92c5c",name:"Norsk Bokm\xe5l"},{code:"nn",hash:"bdce0da5d354f48c7eb86bdc1a4cd99e",name:"Norsk Nynorsk"},{code:"pl",hash:"65e4af686d8003f6ec3dbef207e3496b",name:"Polski"},{code:"pt",hash:"8299462a1d6c5c2c3e30036007ab3a90",name:"Portugu\xeas"},{code:"pt-BR",hash:"1ce77a353384c818b422ea352623130e",name:"Portugu\xeas (BR)"},{code:"ro",hash:"e4fdbb8dd486adb630bf91bc45759a9a",name:"Rom\xe2nă"},{code:"ru",hash:"bcc837f7c35d8b7fd5c4b8b132897937",name:"Русский"},{code:"sk",hash:"58f8de83036745be62359d3ff264bfd1",name:"Slovenčina"},{code:"sl",hash:"538f4f6d83a7c05aa6872dda2d587563",name:"Slovenščina"},{code:"sr",hash:"670d86891d9e37acf78b79c16abfc6ff",name:"Српски"},{code:"sr-Latn",hash:"595cab6303de725000903be1c92809cd",name:"Srpski"},{code:"sv",hash:"401d57686d2311d59e7d6bdd416443a6",name:"Svenska"},{code:"ta",hash:"f142f7a684b04549d63e465810daec49",name:"தமிழ்"},{code:"te",hash:"9790d7308be59a0e99e65ee9428597e2",name:"తెలుగు"},{code:"th",hash:"07c5e06dae4325ea15ac4290c99213b0",name:"ภาษาไทย"},{code:"tr",hash:"9989b01546a0cf87995b9a8e9f7889b6",name:"T\xfcrk\xe7e"},{code:"uk",hash:"f5bd354d9528c0dd60066347d0a32a14",name:"Українська"},{code:"ur",hash:"420acff562577cdb9d8038fcec9714c2",name:"اُردُو"},{code:"vi",hash:"a6f8cc191910036de86db7ad33151fb8",name:"Tiếng Việt"},{code:"zh-Hans",hash:"c9dee5b0449cbde9c35b3a824bb3eafd",name:"简体中文"},{code:"zh-Hant",hash:"df0c2ecc8d0ca6da8cbcfc6bf11d41c7",name:"繁體中文"}],locales_m=locales_h.map(e=>({...e,async fetch(){const a=locales_d[e.code];if(typeof a<"u")return a;const o=await locales_n(/* @__PURE__ */Object.assign({"./af/af.json":()=>__webpack_require__.e("9114").then(__webpack_require__.bind(__webpack_require__,1612)),"./ar/ar.json":()=>__webpack_require__.e("2224").then(__webpack_require__.bind(__webpack_require__,4276)),"./bg/bg.json":()=>__webpack_require__.e("971").then(__webpack_require__.bind(__webpack_require__,3908)),"./bn/bn.json":()=>__webpack_require__.e("1134").then(__webpack_require__.bind(__webpack_require__,276)),"./bs/bs.json":()=>__webpack_require__.e("4987").then(__webpack_require__.bind(__webpack_require__,1558)),"./ca/ca.json":()=>__webpack_require__.e("2897").then(__webpack_require__.bind(__webpack_require__,3914)),"./cs/cs.json":()=>__webpack_require__.e("1378").then(__webpack_require__.bind(__webpack_require__,4169)),"./cy/cy.json":()=>__webpack_require__.e("1266").then(__webpack_require__.bind(__webpack_require__,1095)),"./da/da.json":()=>__webpack_require__.e("393").then(__webpack_require__.bind(__webpack_require__,9703)),"./de/de.json":()=>__webpack_require__.e("4642").then(__webpack_require__.bind(__webpack_require__,2005)),"./el/el.json":()=>__webpack_require__.e("4337").then(__webpack_require__.bind(__webpack_require__,2388)),"./en-GB/en-GB.json":()=>__webpack_require__.e("2549").then(__webpack_require__.bind(__webpack_require__,671)),"./en/en.json":()=>__webpack_require__.e("94").then(__webpack_require__.bind(__webpack_require__,1948)),"./eo/eo.json":()=>__webpack_require__.e("3392").then(__webpack_require__.bind(__webpack_require__,5522)),"./es-419/es-419.json":()=>__webpack_require__.e("7182").then(__webpack_require__.bind(__webpack_require__,6794)),"./es/es.json":()=>__webpack_require__.e("3494").then(__webpack_require__.bind(__webpack_require__,1702)),"./et/et.json":()=>__webpack_require__.e("176").then(__webpack_require__.bind(__webpack_require__,8525)),"./eu/eu.json":()=>__webpack_require__.e("345").then(__webpack_require__.bind(__webpack_require__,8093)),"./fa/fa.json":()=>__webpack_require__.e("9532").then(__webpack_require__.bind(__webpack_require__,468)),"./fi/fi.json":()=>__webpack_require__.e("8259").then(__webpack_require__.bind(__webpack_require__,5455)),"./fr/fr.json":()=>__webpack_require__.e("1292").then(__webpack_require__.bind(__webpack_require__,450)),"./fy/fy.json":()=>__webpack_require__.e("7059").then(__webpack_require__.bind(__webpack_require__,2023)),"./ga/ga.json":()=>__webpack_require__.e("8208").then(__webpack_require__.bind(__webpack_require__,2748)),"./gl/gl.json":()=>__webpack_require__.e("2246").then(__webpack_require__.bind(__webpack_require__,4042)),"./gsw/gsw.json":()=>__webpack_require__.e("6189").then(__webpack_require__.bind(__webpack_require__,5731)),"./he/he.json":()=>__webpack_require__.e("3158").then(__webpack_require__.bind(__webpack_require__,2954)),"./hi/hi.json":()=>__webpack_require__.e("1696").then(__webpack_require__.bind(__webpack_require__,2977)),"./hr/hr.json":()=>__webpack_require__.e("2449").then(__webpack_require__.bind(__webpack_require__,6119)),"./hu/hu.json":()=>__webpack_require__.e("9438").then(__webpack_require__.bind(__webpack_require__,3039)),"./hy/hy.json":()=>__webpack_require__.e("5010").then(__webpack_require__.bind(__webpack_require__,3729)),"./id/id.json":()=>__webpack_require__.e("5906").then(__webpack_require__.bind(__webpack_require__,4191)),"./is/is.json":()=>__webpack_require__.e("3244").then(__webpack_require__.bind(__webpack_require__,7559)),"./it/it.json":()=>__webpack_require__.e("8816").then(__webpack_require__.bind(__webpack_require__,3667)),"./ja/ja.json":()=>__webpack_require__.e("4358").then(__webpack_require__.bind(__webpack_require__,1791)),"./ka/ka.json":()=>__webpack_require__.e("2055").then(__webpack_require__.bind(__webpack_require__,876)),"./ko/ko.json":()=>__webpack_require__.e("5850").then(__webpack_require__.bind(__webpack_require__,6485)),"./lb/lb.json":()=>__webpack_require__.e("2142").then(__webpack_require__.bind(__webpack_require__,6286)),"./lt/lt.json":()=>__webpack_require__.e("7913").then(__webpack_require__.bind(__webpack_require__,3718)),"./lv/lv.json":()=>__webpack_require__.e("6390").then(__webpack_require__.bind(__webpack_require__,4952)),"./mk/mk.json":()=>__webpack_require__.e("6836").then(__webpack_require__.bind(__webpack_require__,6705)),"./ml/ml.json":()=>__webpack_require__.e("5791").then(__webpack_require__.bind(__webpack_require__,9702)),"./nb/nb.json":()=>__webpack_require__.e("2833").then(__webpack_require__.bind(__webpack_require__,3654)),"./nl/nl.json":()=>__webpack_require__.e("7191").then(__webpack_require__.bind(__webpack_require__,2651)),"./nn/nn.json":()=>__webpack_require__.e("1621").then(__webpack_require__.bind(__webpack_require__,8450)),"./pl/pl.json":()=>__webpack_require__.e("9354").then(__webpack_require__.bind(__webpack_require__,9399)),"./pt-BR/pt-BR.json":()=>__webpack_require__.e("3136").then(__webpack_require__.bind(__webpack_require__,3285)),"./pt/pt.json":()=>__webpack_require__.e("8977").then(__webpack_require__.bind(__webpack_require__,6387)),"./ro/ro.json":()=>__webpack_require__.e("3337").then(__webpack_require__.bind(__webpack_require__,6405)),"./ru/ru.json":()=>__webpack_require__.e("7370").then(__webpack_require__.bind(__webpack_require__,267)),"./sk/sk.json":()=>__webpack_require__.e("298").then(__webpack_require__.bind(__webpack_require__,7696)),"./sl/sl.json":()=>__webpack_require__.e("223").then(__webpack_require__.bind(__webpack_require__,4074)),"./sr-Latn/sr-Latn.json":()=>__webpack_require__.e("319").then(__webpack_require__.bind(__webpack_require__,3444)),"./sr/sr.json":()=>__webpack_require__.e("8198").then(__webpack_require__.bind(__webpack_require__,1838)),"./sv/sv.json":()=>__webpack_require__.e("7477").then(__webpack_require__.bind(__webpack_require__,6442)),"./ta/ta.json":()=>__webpack_require__.e("5066").then(__webpack_require__.bind(__webpack_require__,9331)),"./te/te.json":()=>__webpack_require__.e("8028").then(__webpack_require__.bind(__webpack_require__,2407)),"./th/th.json":()=>__webpack_require__.e("8484").then(__webpack_require__.bind(__webpack_require__,4464)),"./tr/tr.json":()=>__webpack_require__.e("1654").then(__webpack_require__.bind(__webpack_require__,1929)),"./uk/uk.json":()=>__webpack_require__.e("1700").then(__webpack_require__.bind(__webpack_require__,2305)),"./ur/ur.json":()=>__webpack_require__.e("7732").then(__webpack_require__.bind(__webpack_require__,6243)),"./vi/vi.json":()=>__webpack_require__.e("3957").then(__webpack_require__.bind(__webpack_require__,7060)),"./zh-Hans/zh-Hans.json":()=>__webpack_require__.e("1476").then(__webpack_require__.bind(__webpack_require__,9514)),"./zh-Hant/zh-Hant.json":()=>__webpack_require__.e("2292").then(__webpack_require__.bind(__webpack_require__,6999))}),`./${e.code}/${e.code}.json`,3);return locales_d[e.code]=o.default,o.default}}));var emotion_styled_browser_esm=__webpack_require__(4421);var emotion_react_browser_esm_js_=__webpack_require__(8127);const isDate=d=>d instanceof Date;const isEmpty=o=>0===Object.keys(o).length;const isObject=o=>null!=o&&"object"==typeof o;const utils_hasOwnProperty=(o,...args)=>Object.prototype.hasOwnProperty.call(o,...args);const isEmptyObject=o=>isObject(o)&&isEmpty(o);const makeObjectWithoutPrototype=()=>Object.create(null);const diff_diff=(lhs,rhs)=>{if(lhs===rhs)return{};if(!isObject(lhs)||!isObject(rhs))return rhs;const deletedValues=Object.keys(lhs).reduce((acc,key)=>{if(!utils_hasOwnProperty(rhs,key))acc[key]=void 0;return acc},makeObjectWithoutPrototype());if(isDate(lhs)||isDate(rhs)){if(lhs.valueOf()==rhs.valueOf())return{};return rhs}return Object.keys(rhs).reduce((acc,key)=>{if(!utils_hasOwnProperty(lhs,key)){acc[key]=rhs[key];return acc}const difference=diff_diff(lhs[key],rhs[key]);if(isEmptyObject(difference)&&!isDate(difference)&&(isEmptyObject(lhs[key])||!isEmptyObject(rhs[key])))return acc;acc[key]=difference;return acc},deletedValues)};const diff=diff_diff;var esm=__webpack_require__(8812);const HassContext_u=["last_changed","last_updated","context"],HassContext_l=(t,e=HassContext_u)=>Object.fromEntries(Object.entries(t).map(([n,s])=>[n,Object.fromEntries(Object.entries(s).filter(([r])=>!e.includes(r)))])),HassContext_p={xxs:600,xs:900,sm:1200,md:1536,lg:1700,xlg:1701},HassContext_b=(0,esm.Ue)(t=>({routes:[],setRoutes:e=>t(()=>({routes:e})),entities:{},setHassUrl:e=>t({hassUrl:e}),hassUrl:null,hash:"",locales:null,setLocales:e=>t({locales:e}),setHash:e=>t({hash:e}),setPortalRoot:e=>t({portalRoot:e}),windowContext:window,setWindowContext:e=>t({windowContext:e}),setEntities:e=>t(n=>{const s=diff(HassContext_l(n.entities),HassContext_l(e));if(!(0,lodash.isEmpty)(s)){const r=Object.keys(s).reduce((o,i)=>({...o,[i]:e[i]}),{});return Object.keys(r).forEach(o=>{n.entities[o]={...n.entities[o],...e[o]}}),n.ready?{lastUpdated:/* @__PURE__ */new Date,entities:n.entities}:{ready:!0,lastUpdated:/* @__PURE__ */new Date,entities:n.entities}}return n}),connection:null,setConnection:e=>t({connection:e}),cannotConnect:!1,setCannotConnect:e=>t({cannotConnect:e}),ready:!1,setReady:e=>t({ready:e}),lastUpdated:/* @__PURE__ */new Date,setLastUpdated:e=>t({lastUpdated:e}),auth:null,setAuth:e=>t({auth:e}),config:null,setConfig:e=>t({config:e}),error:null,setError:e=>t({error:e}),breakpoints:HassContext_p,setBreakpoints:e=>t({breakpoints:{...e,xlg:e.lg+1}}),globalComponentStyles:{},setGlobalComponentStyles:e=>t(()=>({globalComponentStyles:e}))})),HassContext_h=(0,index_js_eager_.createContext)({});var iconify=__webpack_require__(4445);function oe(){const e=(0,index_js_eager_.useContext)(HassContext_h);if(void 0===e||(0,lodash.isEmpty)(e))throw new Error("useHass must be used within a HassProvider, have you wrapped your application in <HassConnect hassUrl={HASS_URL} />?");return e}const index_BPKUNssF_I={};function st(e){Object.assign(index_BPKUNssF_I,e)}function ae(e,r){const{search:o,replace:n,fallback:s}=r??{};return index_BPKUNssF_I[e]?"string"==typeof o&&"string"==typeof n?index_BPKUNssF_I[e].replace(`${o}`,n).trim():index_BPKUNssF_I[e]:s||e}function Ie(){return index_BPKUNssF_I}const xe=(e,r)=>{const{fallback:o=ae("unknown")}=r??{},[n,s]=(0,index_js_eager_.useState)(o),{getConfig:l}=oe();return(0,index_js_eager_.useEffect)(()=>{(async()=>{const i=(await l())?.language,p=locales_m.find(f=>f.code===i);if(p){const f=await p.fetch();s(f[e]??o)}})()},[e,o,l]),n};var q,ct;function se(){if(ct)return q;ct=1;var e=react_is,r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[e.ForwardRef]=n,l[e.Memo]=s;function a(g){return e.isMemo(g)?s:l[g.$$typeof]||r}var i=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,U=Object.getOwnPropertyDescriptor,R=Object.getPrototypeOf,S=Object.prototype;function c(g,y,_){if("string"!=typeof y){if(S){var b=R(y);b&&b!==S&&c(g,b,_)}var A=p(y);f&&(A=A.concat(f(y)));for(var m=a(g),j=a(y),P=0;P<A.length;++P){var w=A[P];if(!o[w]&&!(_&&_[w])&&!(j&&j[w])&&!(m&&m[w])){var L=U(y,w);try{i(g,w,L)}catch{}}}}return g}return q=c}se();var ce=function(r){return r()},ie=index_js_eager_.useInsertionEffect?index_js_eager_.useInsertionEffect:!1,ue=ie||ce,mt=/* @__PURE__ */index_js_eager_.createContext(typeof HTMLElement<"u"?/* @__PURE__ */(0,emotion_cache_browser_esm.Z)({key:"css"}):null);mt.Provider;var le=function(r){return/* @__PURE__ */(0,index_js_eager_.forwardRef)(function(o,n){var s=(0,index_js_eager_.useContext)(mt);return r(o,s,n)})},fe=/* @__PURE__ */index_js_eager_.createContext({}),index_BPKUNssF_F={}.hasOwnProperty,Q="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",gt=function(r,o){var n={};for(var s in o)index_BPKUNssF_F.call(o,s)&&(n[s]=o[s]);return n[Q]=r,n},he=function(r){var o=r.cache,n=r.serialized,s=r.isStringTag;return(0,emotion_utils_browser_esm.hC)(o,n,s),ue(function(){return(0,emotion_utils_browser_esm.My)(o,n,s)}),null},de=/* @__PURE__ */le(function(e,r,o){var n=e.css;"string"==typeof n&&void 0!==r.registered[n]&&(n=r.registered[n]);var s=e[Q],l=[n],a="";"string"==typeof e.className?a=(0,emotion_utils_browser_esm.fp)(r.registered,l,e.className):null!=e.className&&(a=e.className+" ");var i=(0,emotion_serialize_esm.O)(l,void 0,index_js_eager_.useContext(fe));a+=r.key+"-"+i.name;var p={};for(var f in e)index_BPKUNssF_F.call(e,f)&&"css"!==f&&f!==Q&&(p[f]=e[f]);return p.className=a,o&&(p.ref=o),/* @__PURE__ */index_js_eager_.createElement(index_js_eager_.Fragment,null,/* @__PURE__ */index_js_eager_.createElement(he,{cache:r,serialized:i,isStringTag:"string"==typeof s}),/* @__PURE__ */index_js_eager_.createElement(s,p))}),yt=de,it=jsx_runtime.Fragment,index_BPKUNssF_E=function(r,o,n){return index_BPKUNssF_F.call(o,"css")?jsx_runtime.jsx(yt,gt(r,o),n):jsx_runtime.jsx(r,o,n)},G=function(r,o,n){return index_BPKUNssF_F.call(o,"css")?jsx_runtime.jsxs(yt,gt(r,o),n):jsx_runtime.jsxs(r,o,n)};function index_BPKUNssF_$(e,r){const n=(()=>{switch(e){case ERR_INVALID_AUTH:return`ERR_INVALID_AUTH: Invalid authentication. ${r?'Check your "Long-Lived Access Token".':""}`;case ERR_CANNOT_CONNECT:return"ERR_CANNOT_CONNECT: Unable to connect";case ERR_CONNECTION_LOST:return"ERR_CONNECTION_LOST: Lost connection to home assistant.";case ERR_HASS_HOST_REQUIRED:return"ERR_HASS_HOST_REQUIRED: Please enter a Home Assistant URL.";case ERR_INVALID_HTTPS_TO_HTTP:return'ERR_INVALID_HTTPS_TO_HTTP: Cannot connect to Home Assistant instances over "http://".';default:return null}})();return null!==n?n:e?.error||e?.message||`Unknown Error (${e})`}function vt(){try{return window.top?.hassConnection}catch(e){console.error("Error getting inherited connection",e);return}}function pe(e,r){const o=location&&location.search.includes("auth_callback=1"),n=!!vt(),s=!!r,l=!!token_storage_c(e,!1);switch(!0){case o:return"auth-callback";case n:return"inherited-auth";case s:return"provided-token";case l:return"saved-tokens";default:return"user-request"}}const Et=async(e,r)=>{const o=pe(e,r);if("inherited-auth"===o)try{const{auth:a,conn:i}=await vt();return{type:"success",connection:i,auth:a}}catch(a){return{type:"error",error:index_BPKUNssF_$(a,r)}}if("provided-token"===o&&r)try{const a=await createLongLivedTokenAuth(e,r);return{type:"success",connection:await createConnection({auth:a}),auth:a}}catch(a){return{type:"error",error:index_BPKUNssF_$(a,r)}}const n={saveTokens:token_storage_a,loadTokens:()=>Promise.resolve(token_storage_c(e))};if(e&&"user-request"===o){if(n.hassUrl=e,""===n.hassUrl)return{type:"error",error:"Please enter a Home Assistant URL."};if(-1===n.hassUrl.indexOf("://"))return{type:"error",error:"Please enter your full URL, including the protocol part (https://)."};try{new URL(n.hassUrl)}catch(a){return console.log("Error:",a),{type:"error",error:"Invalid URL"}}}let s;try{s=await getAuth(n)}catch(a){return a?.error==="invalid_grant"?(token_storage_l(),Et(e,r)):"saved-tokens"===o&&a===ERR_CANNOT_CONNECT?{type:"failed",cannotConnect:!0}:{type:"error",error:index_BPKUNssF_$(a,r)}}finally{location&&location.search.includes("auth_callback=1")&&history.replaceState(null,"",location.pathname)}let l;try{l=await createConnection({auth:s})}catch(a){if("saved-tokens"===o){if(a===ERR_CANNOT_CONNECT)return{type:"failed",cannotConnect:!0};a===ERR_INVALID_AUTH&&token_storage_a(null)}return{type:"error",error:index_BPKUNssF_$(a,r)}}return{type:"success",connection:l,auth:s}};function me({children:e,hassUrl:r,hassToken:o,locale:n,portalRoot:s,windowContext:l}){const a=(0,index_js_eager_.useRef)(null),i=(0,index_js_eager_.useRef)(!1),p=(0,index_js_eager_.useRef)(!1),f=HassContext_b(t=>t.setHash),U=HassContext_b(t=>t.hash),R=HassContext_b(t=>t.routes),S=HassContext_b(t=>t.setRoutes),c=HassContext_b(t=>t.connection),g=HassContext_b(t=>t.setConnection),y=(0,index_js_eager_.useRef)(null),_=HassContext_b(t=>t.entities),b=HassContext_b(t=>t.setEntities),A=HassContext_b(t=>t.error),m=HassContext_b(t=>t.setError),j=HassContext_b(t=>t.cannotConnect),P=HassContext_b(t=>t.setCannotConnect),w=HassContext_b(t=>t.setAuth),L=HassContext_b(t=>t.ready),M=HassContext_b(t=>t.setReady),N=HassContext_b(t=>t.setConfig),J=HassContext_b(t=>t.setHassUrl),K=HassContext_b(t=>t.setPortalRoot),D=HassContext_b(t=>t.setLocales),X=HassContext_b(t=>t.setWindowContext);(0,index_js_eager_.useEffect)(()=>{s&&K(s)},[s,K]),(0,index_js_eager_.useEffect)(()=>{l&&X(l)},[l,X]);const Z=(0,index_js_eager_.useCallback)(()=>{w(null),g(null),y.current=null,b({}),N(null),m(null),P(!1),M(!1),S([]),i.current=!1,a.current&&(a.current(),a.current=null)},[w,P,N,g,b,m,M,S]),tt=(0,index_js_eager_.useCallback)(async()=>{try{Z(),token_storage_l(),location&&location.reload()}catch(t){console.log("Error:",t),m("Unable to log out!")}},[Z,m]),wt=(0,index_js_eager_.useCallback)(async()=>{const t=await Et(r,o);"error"===t.type?(i.current=!1,m(t.error)):"failed"===t.type?(i.current=!1,P(!0)):"success"===t.type&&(w(t.auth),g(t.connection),y.current=t.connection,i.current=!0)},[r,o,m,w,g,P]);(0,index_js_eager_.useEffect)(()=>{J(r)},[r,J]);const Ct=(0,index_js_eager_.useCallback)(async()=>null===c?null:await getStates(c),[c]),Rt=(0,index_js_eager_.useCallback)(async()=>null===c?null:await getServices(c),[c]),St=(0,index_js_eager_.useCallback)(async()=>null===c?null:await getConfig(c),[c]),Tt=(0,index_js_eager_.useCallback)(async()=>null===c?null:await getUser(c),[c]),bt=(0,index_js_eager_.useCallback)(t=>new URL(t,c?.options.auth?.data.hassUrl).toString(),[c]);async function Pt(t,d){try{const u=await fetch(`${r}/api${t}`,{method:"GET",...d??{},headers:{Authorization:"Bearer "+c?.options.auth?.accessToken,"Content-type":"application/json;charset=UTF-8",...d?.headers??{}}});return 200===u.status?{status:"success",data:await u.json()}:{status:"error",data:u.statusText}}catch(u){return console.log("Error:",u),{status:"error",data:`API Request failed for endpoint "${t}", follow instructions here: https://shannonhochkins.github.io/ha-component-kit/?path=/docs/core-hooks-usehass-hass-callapi--docs.`}}}const k=(0,index_js_eager_.useCallback)(async t=>{const d=locales_m.find(({code:u})=>u===(n??t?.language));if(d)return await d.fetch();throw new Error(`Locale "${n??t?.language}" not found, available options are "${locales_m.map(({code:u})=>`${u}`).join(", ")}"`)},[n]);(0,index_js_eager_.useEffect)(()=>{n&&k(null).then(t=>{st(t),D(t)}).catch(t=>{m(`Error retrieving translations from Home Assistant: ${t?.message??t}`)})},[n,k,D,m]),(0,index_js_eager_.useEffect)(()=>{if(!c||p.current)return;p.current=!0;const t=subscribeConfig(c,d=>{k(d).then(u=>{N(d),st(u),D(u)}).catch(u=>{N(d),m(`Error retrieving translations from Home Assistant: ${u?.message??u}`)})});return()=>{t()}},[c,D,k,N,m]),(0,index_js_eager_.useEffect)(()=>{""!==location.hash&&location.hash.replace("#","")!==U&&f(location.hash)},[f,U]),(0,index_js_eager_.useEffect)(()=>{function t(){S(R.map(d=>d.hash===location.hash.replace("#","")?{...d,active:!0}:{...d,active:!1})),f(location.hash)}return window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}},[R,f,S]);const At=(0,index_js_eager_.useCallback)(t=>{if(!(void 0!==R.find(u=>u.hash===t.hash))&&typeof window<"u"){const u=window.location.hash.replace("#",""),O=""!==u&&u===t.hash;S([...R,{...t,active:O}])}},[R,S]),Ot=(0,index_js_eager_.useCallback)(t=>R.find(u=>u.hash===t)||null,[R]),_t=(0,index_js_eager_.useCallback)(()=>_,[_]),Lt=(0,index_js_eager_.useCallback)(async({domain:t,service:d,serviceData:u,target:O,returnResponse:rt})=>{const Nt="string"==typeof O||(0,lodash.isArray)(O)?{entity_id:O}:O;if("string"!=typeof d)throw new Error("service must be a string");if(c&&L)try{const W=await commands_callService(c,(0,lodash.snakeCase)(t),(0,lodash.snakeCase)(d),u,Nt,rt);return rt?W:void 0}catch(W){console.log("Error:",W)}},[c,L]);(0,index_js_eager_.useEffect)(()=>{c&&null===a.current&&(a.current=subscribeEntities(c,t=>{b(t)}))},[c,b]),(0,index_js_eager_.useEffect)(()=>()=>{i.current=!1,a.current&&(a.current(),a.current=null)},[]);const et=(0,index_module.y1)(async()=>{try{if(y.current&&!c){g(y.current),i.current=!0;return}if(!y.current&&c){y.current=c,i.current=!0;return}if(i.current)return;i.current=!0,await wt()}catch(t){const d=index_BPKUNssF_$(t);m(`Unable to connect to Home Assistant, please check the URL: "${d}"`)}},100,{leading:!0,trailing:!1});return(0,index_js_eager_.useEffect)(()=>{et()},[et]),j?/* @__PURE__ */G("p",{children:["Unable to connect to $",token_storage_c(r).hassUrl,", refresh the page and try again, or ",/* @__PURE__ */index_BPKUNssF_E("a",{onClick:tt,children:"Logout"}),"."]}):/* @__PURE__ */index_BPKUNssF_E(HassContext_h.Provider,{value:{useStore:HassContext_b,logout:tt,addRoute:At,getRoute:Ot,getStates:Ct,getServices:Rt,getConfig:St,getUser:Tt,callApi:Pt,getAllEntities:_t,callService:Lt,joinHassUrl:bt},children:null===A?e(L):A})}const index_BPKUNssF_z=(0,emotion_react_browser_esm_js_.keyframes)`
  0% {stroke-width:0; opacity:0;}
  50% {stroke-width:5; opacity:1;}
  100% {stroke-width:0; opacity:0;}
`;function ge({className:e}){return /* @__PURE__ */index_BPKUNssF_E("div",{className:e,children:/* @__PURE__ */G("svg",{children:[/* @__PURE__ */index_BPKUNssF_E("path",{d:"m 12.5,20 15,0 0,0 -15,0 z"}),/* @__PURE__ */index_BPKUNssF_E("path",{d:"m 32.5,20 15,0 0,0 -15,0 z"}),/* @__PURE__ */index_BPKUNssF_E("path",{d:"m 52.5,20 15,0 0,0 -15,0 z"}),/* @__PURE__ */index_BPKUNssF_E("path",{d:"m 72.5,20 15,0 0,0 -15,0 z"})]})})}const ye=(0,emotion_styled_browser_esm.Z)(ge)`
  position: fixed;
  inset: 0;
  background-color: #1a1a1a;
  svg {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 6.25em;
    height: 3.125em;
    margin: -1.562em 0 0 -3.125em;
    path {
      fill: none;
      stroke: #f0c039;
      opacity: 0;
    }
    path:nth-of-type(1) {
      animation: ${index_BPKUNssF_z} 1s ease-in-out 0s infinite alternate;
    }
    path:nth-of-type(2) {
      animation: ${index_BPKUNssF_z} 1s ease-in-out 0.1s infinite alternate;
    }
    path:nth-of-type(3) {
      animation: ${index_BPKUNssF_z} 1s ease-in-out 0.2s infinite alternate;
    }
    path:nth-of-type(4) {
      animation: ${index_BPKUNssF_z} 1s ease-in-out 0.3s infinite alternate;
    }
  }
`,ut=emotion_styled_browser_esm.Z.div`
  width: 100%;
  height: 100%;
`,Ue=(0,index_js_eager_.memo)(function({children:r,hassUrl:o,hassToken:n,loading:s=/* @__PURE__ */index_BPKUNssF_E(ye,{}),onReady:l,options:a={}}){const i=(0,index_js_eager_.useRef)(!1),p=(0,index_js_eager_.useMemo)(()=>{try{return new URL(o).origin}catch(f){return console.log("Error:",f),null}},[o]);return p&&"null"!==p&&null!==p?/* @__PURE__ */index_BPKUNssF_E(me,{hassUrl:p,hassToken:n,...a,children:f=>/* @__PURE__ */index_BPKUNssF_E(it,{children:f?/* @__PURE__ */G(ut,{children:[l&&!i.current&&(l(),i.current=!0,null),r]}):/* @__PURE__ */index_BPKUNssF_E(ut,{children:s})})}):/* @__PURE__ */index_BPKUNssF_E(it,{children:"Provide the hassUrl prop with a valid url to your home assistant instance."})});const computeDomainTitle_l=(o,a)=>{const t=computeDomain_m(o);switch(t){case"plant":return ae("plant_status");case"switch":return a&&"outlet"===a?ae("outlet"):ae("switch");case"alarm_control_panel":return ae("alarm_panel");case"tts":return ae("text_to_speech");case"cloud":return ae("home_assistant_cloud");case"hassio":return ae("home_assistant")+" IO";case"frontend":return ae("home_assistant_frontend");case"homeassistant":return ae("home_assistant");case"lawn_mower":return ae("lawn_mower_commands");case"rest_command":return ae("restful_command");case"persistent_notification":return ae("persistent_notification");case"binary_sensor":return ae("binary_sensor");case"datetime":return ae("date_time");case"alert":return ae("alert_classes");case"water_heater":return`${ae("water")} ${ae("aux_heat")}`;case"stt":case"google":case"reolink":case"notify":case"zha":case"vacuum":return(0,lodash.startCase)((0,lodash.lowerCase)(t));default:{const r=ae(t);return r===t?(0,lodash.startCase)((0,lodash.lowerCase)(t)):r}}};const supports_feature_r=(t,e)=>(t.supported_features&e)!==0;function time_ago_f(a,u){const o=a.getTime();if(isNaN(o))return console.error("Invalid timestamp"),"unknown";const m=new Intl.RelativeTimeFormat(u,{numeric:"auto"});let t;const n=[["second",60],["minute",60],["hour",24],["day",30],["month",12],["year",1/0]],i=(o-/* @__PURE__ */new Date().getTime())/1e3;let e=Math.abs(i);for(t=0;t<n.length&&!(e<n[t][1]);t++)e/=n[t][1];const r=m.format(Math.round(e)*(i<0?-1:1),n[t][0]);return"now"===r?"just now":r}const entity_n="unavailable",entity_t="unknown",entity_A="on",entity_o="off",entity_S="\xb0C",entity_I="\xb0F",entity_=/* @__PURE__ */new Set(["camera","image","media_player"]),entity_i=[entity_A,entity_o,entity_n,entity_t],entity_s=a=>(c,e)=>a.includes(c,e),entity_T=[entity_n,entity_t],entity_N=[entity_n,entity_t,entity_o],entity_l=entity_s(entity_T),entity_U=entity_s(entity_N);function entity_w(t){const r=computeDomain_m(t.entity_id),e=t.state;if(["button","event","input_button","scene"].includes(r))return e!==entity_n;if(entity_l(e)||e===entity_o&&"alert"!==r)return!1;switch(r){case"alarm_control_panel":return"disarmed"!==e;case"alert":return"idle"!==e;case"cover":return"closed"!==e;case"device_tracker":case"person":return"not_home"!==e;case"lawn_mower":return["mowing","error"].includes(e);case"lock":return"locked"!==e;case"media_player":return"standby"!==e;case"vacuum":return!["idle","docked","paused"].includes(e);case"plant":return"problem"===e;case"group":return["on","home","open","locked","problem"].includes(e);case"timer":return"active"===e;case"camera":return"streaming"===e}return!0}function string_a(i){return i?(0,lodash.join)((0,lodash.map)((0,lodash.split)(`${i}`,"_"),lodash.capitalize)," "):""}const number_u=(i,t)=>{const r=t?.display_precision;if(null!=r)return{maximumFractionDigits:r,minimumFractionDigits:r};if(Number.isInteger(Number(i?.attributes?.step))&&Number.isInteger(Number(i?.state)))return{maximumFractionDigits:0}},number_a=i=>number_n(i.attributes),number_n=(i,t)=>!!i.unit_of_measurement||!!i.state_class||(t||[]).includes(i.device_class||""),number_m=(i,t)=>{const r={maximumFractionDigits:2,...t};if("string"!=typeof i)return r;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){const e=i.indexOf(".")>-1?i.split(".")[1].length:0;r.minimumFractionDigits=e,r.maximumFractionDigits=e}return r},number_s=(i,t=2)=>Math.round(i*10**t)/10**t,number_c=(i,t)=>(Number.isNaN=Number.isNaN||function r(e){return"number"==typeof e&&r(e)},Number.isNaN(Number(i))||""===i?"string"==typeof i?i:`${number_s(i,t?.maximumFractionDigits).toString()}${t?.style==="currency"?` ${t.currency}`:""}`:new Intl.NumberFormat("en-US",number_m(i,{...t,useGrouping:!1})).format(Number(i)));const date_I={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},date_d=(t,e)=>date_u(parseFloat(t)*date_I[e])||"0",date_o=(t,e=2)=>{let r=""+t;for(let n=1;n<e;n++)r=parseInt(r)<10**n?`0${r}`:r;return r};function date_u(t){const e=Math.floor(t/1e3/3600),r=Math.floor(t/1e3%3600/60),n=Math.floor(t/1e3%3600%60),a=Math.floor(t%1e3);return e>0?`${e}:${date_o(r)}:${date_o(n)}`:r>0?`${r}:${date_o(n)}`:n>0||a>0?`${n}${a>0?`.${date_o(a,3)}`:""}`:null}const date_N=/^\d{4}-(0[1-9]|1[0-2])-([12]\d|0[1-9]|3[01])[T| ](((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)(\8[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)$/,date_E=t=>date_N.test(t),date_m="^\\d{4}-(0[1-9]|1[0-2])-([12]\\d|0[1-9]|3[01])",date_f=new RegExp(date_m+"$"),date_D=new RegExp(date_m),date_h=(t,e=!1)=>e?date_D.test(t):date_f.test(t);function date_L(t){return t?t instanceof Date&&!isNaN(t.valueOf()):!1}const date_s={},date_c={},date_i={},date_S=t=>(date_s[t]||(date_s[t]=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:t})),date_s[t]),date_l=t=>(date_c[t]||(date_c[t]=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hourCycle:"h12",timeZone:t})),date_c[t]),date_=t=>(date_i[t]||(date_i[t]=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12",timeZone:t})),date_i[t]),date_C=(t,e)=>date_S(e.time_zone).format(t),date_O=(t,e)=>date_l(e.time_zone).format(t),date_T=(t,e)=>date_(e.time_zone).format(t);const computeAttributeDisplay_f=/* @__PURE__ */new Set(["temperature","current_temperature","target_temperature","target_temp_temp","target_temp_high","target_temp_low","target_temp_step","min_temp","max_temp"]),computeAttributeDisplay_g={light:{brightness:e=>Math.round(e/255*100).toString()},media_player:{volume_level:e=>Math.round(100*e).toString(),media_duration:e=>date_d(e.toString(),"s")}},computeAttributeDisplay_T={climate:{humidity:"%",current_humidity:"%",target_humidity_low:"%",target_humidity_high:"%",target_humidity_step:"%",min_humidity:"%",max_humidity:"%"},cover:{current_position:"%",current_tilt_position:"%"},fan:{percentage:"%"},humidifier:{humidity:"%",current_humidity:"%",min_humidity:"%",max_humidity:"%"},light:{color_temp:"mired",max_mireds:"mired",min_mireds:"mired",color_temp_kelvin:"K",min_color_temp_kelvin:"K",max_color_temp_kelvin:"K",brightness:"%"},sun:{azimuth:"\xb0",elevation:"\xb0"},vacuum:{battery_level:"%"},valve:{current_position:"%"},sensor:{battery_level:"%"},media_player:{volume_level:"%"}},computeAttributeDisplay_v=(e,n,m)=>{const i=e.unit_system.length||"";switch(m){case"visibility":return n.attributes.visibility_unit||i;case"precipitation":return n.attributes.precipitation_unit||("km"===i?"mm":"in");case"pressure":return n.attributes.pressure_unit||("km"===i?"hPa":"inHg");case"temperature":case"templow":return n.attributes.temperature_unit||e.unit_system.temperature;case"wind_speed":return n.attributes.wind_speed_unit||`${i}/h`;case"humidity":case"precipitation_probability":return"%";default:{const a=e.unit_system;return m in a?a[m]:""}}},computeAttributeDisplay_A=(e,n,m,i,a)=>{const t=void 0!==a?a:e.attributes[i];if(null===t)return ae("unknown");if("number"==typeof t){const r=computeDomain_m(e.entity_id),o=computeAttributeDisplay_g[r]?.[i],s=o?o(t):number_c(t);let u=computeAttributeDisplay_T[r]?.[i];return"weather"===r?u=computeAttributeDisplay_v(n,e,i):computeAttributeDisplay_f.has(i)&&(u=n.unit_system.temperature),u?`${s}${u}`:s}if("string"==typeof t&&date_h(t,!0)){if(date_E(t)){const o=new Date(t);if(date_L(o))return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"}).format(o)}const r=new Date(t);if(date_L(r))return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(r)}return Array.isArray(t)&&t.some(r=>r instanceof Object)||!Array.isArray(t)&&t instanceof Object?JSON.stringify(t):Array.isArray(t)?t.map(r=>computeAttributeDisplay_A(e,n,m,i,r)).join(", "):ae(t)};const computeStateDisplay_K=(i,m,t,s,r)=>{const e=s?.[i.entity_id];return computeStateDisplay_g(m,t,e,i.entity_id,i.attributes,void 0!==r?r:i.state)};let computeStateDisplay_u;const computeStateDisplay_S=async i=>computeStateDisplay_u||(computeStateDisplay_u=i.sendMessagePromise({type:"sensor/numeric_device_classes"}));let computeStateDisplay_d=[];const computeStateDisplay_g=(i,m,t,s,r,e)=>{if(e===entity_t||e===entity_n)return ae(e);const o=computeDomain_m(s);if(computeStateDisplay_S(i).then(n=>computeStateDisplay_d=n?.numeric_device_classes??[]),number_n(r,"sensor"===o?computeStateDisplay_d:[])){const n=r.unit_of_measurement;if("duration"===r.device_class&&r.unit_of_measurement&&date_I[n]&&t?.display_precision===void 0)try{return date_d(e,n)}catch{}if("monetary"===r.device_class)try{return number_c(e,{style:"currency",currency:r.unit_of_measurement,minimumFractionDigits:2,...number_u({state:e,attributes:r},t)})}catch{}const c=number_c(e,number_u({state:e,attributes:r},t)),a=r.unit_of_measurement;return a?`${c}${a}`:c}if("datetime"===o){const n=new Date(e);return date_T(n,m)}if(["date","input_datetime","time"].includes(o))try{const n=e.split(" ");if(2===n.length)return date_T(new Date(n.join("T")),m);if(1===n.length){if(e.includes("-"))return date_C(/* @__PURE__ */new Date(`${e}T00:00`),m);if(e.includes(":")){const c=/* @__PURE__ */new Date;return date_O(/* @__PURE__ */new Date(`${c.toISOString().split("T")[0]}T${e}`),m)}}return e}catch{return e}if("counter"===o||"number"===o||"input_number"===o)return number_c(e,number_u({state:e,attributes:r},t));if(["button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word"].includes(o)||"sensor"===o&&"timestamp"===r.device_class)try{return date_T(new Date(e),m)}catch{return e}return ae(e)};function useSubscribeEntity_k(t){const{useStore:i}=oe(),r=i(o=>o.entities[t]);return(0,index_js_eager_.useCallback)(o=>{if("unknown"===t)return null;if(!r){if(o)return null;throw new Error(`${ae("entity_not_found")} - "${t}"`)}return r},[r,t])}function useService_a(e,r,t){return new Proxy({},{get:(i,s)=>{const n=s;if("toJSON"!==n)return function(f){const{target:l,serviceData:u,returnResponse:o}=f||{};let c=t??l;return Array.isArray(c)&&(c=[...(0,lodash.uniq)(c)]),console.info(`${ae("perform_action_name",{search:"{name}",replace:`${e}.${n}`})} ${e}.${n}:`,{target:c,serviceData:u,returnResponse:o}),r({domain:e,service:n,serviceData:u,target:c,returnResponse:o})}}})}function useService_x(e,r){const{callService:t}=oe(),i=(0,index_js_eager_.useMemo)(()=>e?useService_a(e,t,r):void 0,[e,t,r]),s=(0,index_js_eager_.useCallback)(n=>useService_a(n,t,r),[t,r]);return e?i:s}const history_g=["climate","humidifier","water_heater"],history_H=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],history_=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],history_S=s=>s.substr(s.indexOf(".")+1),history_b=(s,i)=>i?.friendly_name===void 0?history_S(s).replace(/_/g," "):i.friendly_name||"",history_E=s=>history_H.includes(computeDomain_m(s)),history_P=({connection:s,entityIds:i,callbackFunction:n,hoursToShow:e=24,minimalResponse:t=!0,significantChangesOnly:r=!0,noAttributes:o})=>{const u={type:"history/stream",entity_ids:i,start_time:new Date(/* @__PURE__ */new Date().getTime()-3600*e*1e3).toISOString(),minimal_response:t,significant_changes_only:r,no_attributes:o??!i.some(l=>history_E(l))},a=new history_T(s,e);return s.subscribeMessage(l=>n(a.processMessage(l)),u)};class history_T{connection;hoursToShow;combinedHistory;constructor(i,n){this.connection=i,this.hoursToShow=n,this.combinedHistory={}}processMessage(i){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=i.states,this.combinedHistory;if(!Object.keys(i.states).length)return this.combinedHistory;const n=this.hoursToShow?(/* @__PURE__ */new Date().getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,e={};for(const t of Object.keys(this.combinedHistory))e[t]=[];for(const t of Object.keys(i.states))e[t]=[];for(const t of Object.keys(e)){if(t in this.combinedHistory&&t in i.states){const r=this.combinedHistory[t],o=r[r.length-1];e[t]=r.concat(i.states[t]),i.states[t][0].lu<o.lu&&(e[t]=e[t].sort((u,a)=>u.lu-a.lu))}else t in this.combinedHistory?e[t]=this.combinedHistory[t]:e[t]=i.states[t];if(n&&t in this.combinedHistory){const r=e[t].filter(u=>u.lu<n);if(!r.length||(e[t]=e[t].filter(u=>u.lu>=n),e[t].length&&e[t][0].lu===n))continue;const o=r[r.length-1];o.lu=n,e[t].unshift(o)}}return this.combinedHistory=e,this.combinedHistory}}const history_d=(s,i)=>s.state===i.state&&(!s.attributes||!i.attributes||history_.every(n=>s.attributes[n]===i.attributes[n])),history_O=(s,i,n)=>{const e=[];return Object.keys(i).forEach(t=>{const r=i[t],o=r[0],u=computeDomain_m(t),a=[];for(const c of r){let m;if(history_g.includes(u)){m={state:c.s,last_changed:1e3*c.lu,attributes:{}};for(const h of history_)h in c.a&&(m.attributes[h]=c.a[h])}else m={state:c.s,last_changed:(c.lc?c.lc:c.lu)*1e3,attributes:{}};a.length>1&&history_d(m,a[a.length-1])&&history_d(m,a[a.length-2])||a.push(m)}const l=t in n?n[t].attributes:"friendly_name"in o.a?o.a:void 0;e.push({domain:u,name:history_b(t,l||{}),entity_id:t,states:a})}),{unit:s,identifier:Object.keys(n).join(""),data:e}},history_w=(s,i,n)=>{const e=[],t=i[0];for(const r of i)e.length>0&&r.s===e[e.length-1].state||(n?.attributes.device_class&&n?.attributes.device_class,e.push({state:r.s,last_changed:(r.lc?r.lc:r.lu)*1e3}));return{name:history_b(s,n?.attributes||t.a),entity_id:s,data:e}},history_D=s=>history_p(s.attributes),history_p=s=>"unit_of_measurement"in s||"state_class"in s,history_R=(s,i,n)=>{const e={},t=[];return n?(Object.keys(n).forEach(o=>{const u=n[o];if(0===u.length)return;const a=o in i?i[o]:void 0,l=!a&&u.find(m=>m.a&&history_p(m.a));let c;a&&history_D(a)?c=a.attributes.unit_of_measurement||" ":l?c=l.a.unit_of_measurement||" ":c=({zone:ae("people_in_zone"),climate:s.unit_system.temperature,counter:"#",humidifier:"%",input_number:"#",number:"#",water_heater:s.unit_system.temperature})[computeDomain_m(o)],c?c in e&&o in e[c]?e[c][o].push(...u):(c in e||(e[c]={}),e[c][o]=u):t.push(history_w(o,u,a))}),{line:Object.keys(e).map(o=>history_O(o,e[o],i)),timeline:t}):{line:[],timeline:[]}};const coordinates_m=t=>t.reduce((u,r)=>u+parseFloat(r.state),0)/t.length,coordinates_x=t=>parseFloat(t[t.length-1].state)||0,coordinates_D=(t,u,r,o,c,g)=>{const a=[];let f=(g-c)/80;f=0!==f?f:80;let e=r/(u-(1===o?1:0));e=isFinite(e)?e:r;const s=t.filter(Boolean)[0];let l=[coordinates_m(s),coordinates_x(s)];const d=(n,N,M=0,b=1)=>{if(b>1&&n)return n.forEach((R,_)=>d(R,N,_,b-1));const h=e*(N+M/6);n&&(l=[coordinates_m(n),coordinates_x(n)]);const T=82.5-((n?l[0]:l[1])-c)/f;return a.push([h,T])};for(let n=0;n<t.length;n+=1)d(t[n],n,0,o);return 1===a.length&&(a[1]=[r,a[0][1]]),a.push([r,a[a.length-1][1]]),a},coordinates_E=(t,u,r,o,c)=>{t.forEach(e=>{e.state=Number(e.state)}),t.every(e=>Number.isNaN(e.state))&&(t=t.map((e,s)=>Number.isNaN(e.state)?{...e,state:s}:e)),t=t.filter(e=>!Number.isNaN(e.state));const g=c?.min!==void 0?c.min:Math.min(...t.map(e=>e.state)),a=c?.max!==void 0?c.max:Math.max(...t.map(e=>e.state)),p=/* @__PURE__ */new Date().getTime(),f=(e,s,l)=>{const d=p-new Date(s.last_changed).getTime();let n=Math.abs(d/36e5-u);return l?(n=(n-Math.floor(n))*60,n=Number((10*Math.round(n/10)).toString()[0])):n=Math.floor(n),e[n]||(e[n]=[]),e[n].push(s),e};if(t=t.reduce((e,s)=>f(e,s,!1),[]),o>1&&(t=t.map(e=>e.reduce((s,l)=>f(s,l,!0),[]))),!!t.length)return coordinates_D(t,u,r,o,g,a)},coordinates_S=(t,u,r,o,c)=>{if(!t)return;const g=t.map(a=>({_state:a.s,state:Number(a.s),last_changed:1e3*a.lu}));return coordinates_E(g,u,r,o,c)};const useHistory_U=(t,e)=>{const{useStore:l}=oe(),c=l(i=>i.connection),u=l(i=>i.config),o=(0,index_js_eager_.useRef)(!1),m=useSubscribeEntity_k(t),[r,d]=(0,index_js_eager_.useState)({}),[f,S]=(0,index_js_eager_.useState)({loading:!e?.disable,timeline:[],entityHistory:[],coordinates:[]}),s=(0,index_js_eager_.useMemo)(()=>({disable:e?.disable,significantChangesOnly:e?.significantChangesOnly,minimalResponse:e?.minimalResponse,hoursToShow:e?.hoursToShow,limits:e?.limits}),[e?.disable,e?.significantChangesOnly,e?.minimalResponse,e?.hoursToShow,e?.limits]);return(0,index_js_eager_.useEffect)(()=>{if(!c||s?.disable)return;let i=!0,n=null;return history_P({connection:c,entityIds:[t],significantChangesOnly:s?.significantChangesOnly,minimalResponse:s?.minimalResponse,hoursToShow:s?.hoursToShow,callbackFunction:a=>{i&&(o.current=!0,d(a))}}).then(a=>{n=a}).catch(()=>{n?.(),o.current=!1}),()=>{i=!1,n?.(),o.current=!1}},[t,s,c]),(0,index_js_eager_.useEffect)(()=>{if(!s?.disable&&o.current){const i=m(!0);if(!i)return;const n={[t]:i},h=history_R(u,n,r).timeline.filter(({entity_id:p})=>p===t),H=coordinates_S(r[t],s?.hoursToShow??24,500,typeof s?.significantChangesOnly>"u"||s?.significantChangesOnly===!0?1:2,s?.limits)??[];S({loading:!1,timeline:h.length>0?h[0].data:[],entityHistory:r[t],coordinates:H})}},[t,u,s,m,r]),(0,index_js_eager_.useMemo)(()=>f,[f])};const binary_sensor_t=r=>{const e="off"===r.state;switch(r.attributes.device_class){case"battery":return e?"mdi:battery":"mdi:battery-outline";case"battery_charging":return e?"mdi:battery":"mdi:battery-charging";case"carbon_monoxide":return e?"mdi:smoke-detector":"mdi:smoke-detector-alert";case"cold":return e?"mdi:thermometer":"mdi:snowflake";case"connectivity":return e?"mdi:close-network-outline":"mdi:check-network-outline";case"door":return e?"mdi:door-closed":"mdi:door-open";case"garage_door":return e?"mdi:garage":"mdi:garage-open";case"power":return e?"mdi:power-plug-off":"mdi:power-plug";case"gas":case"problem":case"safety":case"tamper":return e?"mdi:check-circle":"mdi:alert-circle";case"smoke":return e?"mdi:smoke-detector-variant":"mdi:smoke-detector-variant-alert";case"heat":return e?"mdi:thermometer":"mdi:fire";case"light":return e?"mdi:brightness-5":"mdi:brightness-7";case"lock":return e?"mdi:lock":"mdi:lock-open";case"moisture":return e?"mdi:water-off":"mdi:water";case"motion":return e?"mdi:motion-sensor-off":"mdi:motion-sensor";case"occupancy":return e?"mdi:home-outline":"mdi:home";case"opening":return e?"mdi:square":"mdi:square-outline";case"plug":return e?"mdi:power-plug-off":"mdi:power-plug";case"presence":return e?"mdi:home-outline":"mdi:home";case"running":return e?"mdi:stop":"mdi:play";case"sound":return e?"mdi:music-note-off":"mdi:music-note";case"update":return e?"mdi:package":"mdi:package-up";case"vibration":return e?"mdi:crop-portrait":"mdi:vibrate";case"window":return e?"mdi:window-closed":"mdi:window-open";default:return e?"mdi:radiobox-blank":"mdi:checkbox-marked-circle"}};const constants_e={apparent_power:"mdi:flash",aqi:"mdi:air-filter",atmospheric_pressure:"mdi:thermometer-lines",carbon_dioxide:"mdi:molecule-co2",carbon_monoxide:"mdi:molecule-co",current:"mdi:current-ac",data_rate:"mdi:transmission-tower",data_size:"mdi:database",date:"mdi:calendar",distance:"mdi:arrow-left-right",duration:"mdi:progress-clock",energy:"mdi:lightning-bolt",frequency:"mdi:sine-wave",gas:"mdi:meter-gas",humidity:"mdi:water-percent",illuminance:"mdi:brightness-5",irradiance:"mdi:sun-wireless",moisture:"mdi:water-percent",monetary:"mdi:cash",nitrogen_dioxide:"mdi:molecule",nitrogen_monoxide:"mdi:molecule",nitrous_oxide:"mdi:molecule",ozone:"mdi:molecule",ph:"mdi:ph",pm1:"mdi:molecule",pm10:"mdi:molecule",pm25:"mdi:molecule",power:"mdi:flash",power_factor:"mdi:angle-acute",precipitation:"mdi:weather-rainy",precipitation_intensity:"mdi:weather-pouring",pressure:"mdi:gauge",reactive_power:"mdi:flash",signal_strength:"mdi:wifi",sound_pressure:"mdi:ear-hearing",speed:"mdi:speedometer",sulphur_dioxide:"mdi:molecule",temperature:"mdi:thermometer",timestamp:"mdi:clock",volatile_organic_compounds:"mdi:molecule",volatile_organic_compounds_parts:"mdi:molecule",voltage:"mdi:sine-wave",volume:"mdi:car-coolant-level",water:"mdi:water",weight:"mdi:weight",wind_speed:"mdi:weather-windy"},constants_i={air_quality:"mdi:air-filter",alert:"mdi:alert",calendar:"mdi:calendar",climate:"mdi:thermostat",configurator:"mdi:cog",conversation:"mdi:microphone-message",counter:"mdi:counter",datetime:"mdi:calendar-clock",date:"mdi:calendar",demo:"mdi:home-assistant",google_assistant:"mdi:google-assistant",group:"mdi:google-circles-communities",homeassistant:"mdi:home-assistant",homekit:"mdi:home-automation",image:"mdi:image",image_processing:"mdi:image-filter-frames",input_button:"mdi:button-pointer",input_datetime:"mdi:calendar-clock",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",lawn_mower:"mdi:robot-mower",light:"mdi:lightbulb",mailbox:"mdi:mailbox",notify:"mdi:comment-alert",number:"mdi:ray-vertex",persistent_notification:"mdi:bell",plant:"mdi:flower",proximity:"mdi:apple-safari",remote:"mdi:remote",scene:"mdi:palette",media_player:"mdi:music-box",schedule:"mdi:calendar-clock",script:"mdi:script-text",select:"mdi:format-list-bulleted",sensor:"mdi:eye",simple_alarm:"mdi:bell",siren:"mdi:bullhorn",stt:"mdi:microphone-message",text:"mdi:form-textbox",todo:"mdi:clipboard-list",time:"mdi:clock",timer:"mdi:timer-outline",tts:"mdi:speaker-message",updater:"mdi:cloud-upload",vacuum:"mdi:robot-vacuum",wake_word:"mdi:chat-sleep",zone:"mdi:map-marker-radius"};const battery_a={10:"mdi:battery-10",20:"mdi:battery-20",30:"mdi:battery-30",40:"mdi:battery-40",50:"mdi:battery-50",60:"mdi:battery-60",70:"mdi:battery-70",80:"mdi:battery-80",90:"mdi:battery-90",100:"mdi:battery"},battery_n={10:"mdi:battery-charging-10",20:"mdi:battery-charging-20",30:"mdi:battery-charging-30",40:"mdi:battery-charging-40",50:"mdi:battery-charging-50",60:"mdi:battery-charging-60",70:"mdi:battery-charging-70",80:"mdi:battery-charging-80",90:"mdi:battery-charging-90",100:"mdi:battery-charging"},battery_b=(t,r=!1)=>{const i=10*Math.round(t/10);return r&&t>=10?battery_n[i]:r?"mdi:battery-charging-outline":t<=5?"mdi:battery-alert-variant-outline":battery_a[i]},battery_y=(t,r)=>{const i=t.state,e=r&&"on"===r.state;return battery_d(i,e)},battery_d=(t,r)=>{const i=Number(t);return isNaN(i)?"off"===t?"mdi:battery":"on"===t?"mdi:battery-alert":"mdi:battery-unknown":battery_b(i,r)};const sensor_p="battery",sensor_T=t=>{const r=t?.attributes.device_class;if(r&&r in constants_e)return constants_e[r];if(r===sensor_p)return t?battery_y(t):"mdi:battery";const o=t?.attributes.unit_of_measurement;if(o===entity_S||o===entity_I)return"mdi:thermometer"};const domains_number_s=r=>{const e=r.attributes.device_class;if(e&&e in constants_e)return constants_e[e]};const cover_o=e=>{const r="closed"!==e.state;switch(e.attributes.device_class){case"garage":switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:garage";default:return"mdi:garage-open"}case"gate":switch(e.state){case"opening":case"closing":return"mdi:gate-arrow-right";case"closed":return"mdi:gate";default:return"mdi:gate-open"}case"door":return r?"mdi:door-open":"mdi:door-closed";case"damper":return r?"mdi:circle":"mdi:circle-slice-8";case"shutter":switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-shutter";default:return"mdi:window-shutter-open"}case"curtain":switch(e.state){case"opening":return"mdi:arrow-split-vertical";case"closing":return"mdi:arrow-collapse-horizontal";case"closed":return"mdi:curtains-closed";default:return"mdi:curtains"}case"blind":switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:blinds-horizontal-closed";default:return"mdi:blinds-horizontal"}case"shade":switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:roller-shade-closed";default:return"mdi:roller-shade"}case"window":switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-closed";default:return"mdi:window-open"}}switch(e.state){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-closed";default:return"mdi:window-open"}};const alarm_r=e=>{switch(e){case"armed_away":return"mdi:shield-lock";case"armed_vacation":return"mdi:shield-airplane";case"armed_home":return"mdi:shield-home";case"armed_night":return"mdi:shield-moon";case"armed_custom_bypass":return"mdi:security";case"pending":return"mdi:shield-outline";case"triggered":return"mdi:bell-ring";case"disarmed":return"mdi:shield-off";default:return"mdi:shield"}};function weather_r(e){switch(e){case"clear-night":return"mdi:weather-night";case"cloudy":return"mdi:weather-cloudy";case"fog":return"mdi:weather-fog";case"hail":return"mdi:weather-hail";case"lightning":return"mdi:weather-lightning";case"lightning-rainy":return"mdi:weather-lightning-rainy";case"partlycloudy":return"mdi:weather-partly-cloudy";case"pouring":return"mdi:weather-pouring";case"rainy":return"mdi:weather-rainy";case"snowy":return"mdi:weather-snowy";case"snowy-rainy":return"mdi:weather-snowy-rainy";case"sunny":return"mdi:weather-sunny";case"windy":return"mdi:weather-windy";case"windy-variant":return"mdi:weather-windy-variant";case"exceptional":default:return"mdi:alert-circle-outline"}}function index_CzNGKXJS_Nt(r,e){const t=(0,index_js_eager_.useMemo)(()=>{const i=(0,lodash.snakeCase)(r);return constants_i[i]?constants_i[i]:"mdi:information-outline"},[r]);return null===t?null:/* @__PURE__ */index_BPKUNssF_E(iconify.JO,{style:{fontSize:e?.fontSize??"24px"},icon:t,...e})}function Dt(r,e){return(0,index_js_eager_.useMemo)(()=>null===r?null:/* @__PURE__ */index_BPKUNssF_E(iconify.JO,{style:{fontSize:e?.fontSize??"24px"},icon:r||"octicon:info-24",...e}),[r,e])}function index_CzNGKXJS_O(r,e){const t=e.state;switch(r){case"alarm_control_panel":return alarm_r(t);case"automation":return"unavailable"===t?"mdi:robot-confused":"off"===t?"mdi:robot-off":"mdi:robot";case"binary_sensor":return binary_sensor_t(e);case"button":switch(e.attributes.device_class){case"identify":return"mdi:crosshairs-question";case"restart":return"mdi:restart";case"update":return"mdi:package-up";default:return"mdi:button-pointer"}case"camera":return"off"===t?"mdi:video-off":"mdi:video";case"cover":return cover_o(e);case"device_tracker":return"router"===e.attributes.source_type?"home"===t?"mdi:lan-connect":"mdi:lan-disconnect":["bluetooth","bluetooth_le"].includes(e.attributes.source_type)?"home"===t?"mdi:bluetooth-connect":"mdi:bluetooth":"not_home"===t?"mdi:account-arrow-right":"mdi:account";case"event":switch(e.attributes.device_class){case"doorbell":return"mdi:doorbell";case"button":return"mdi:gesture-tap-button";case"motion":return"mdi:motion-sensor";default:return"mdi:eye-check"}case"fan":return"off"===t?"mdi:fan-off":"mdi:fan";case"humidifier":return"off"===t?"mdi:air-humidifier-off":"mdi:air-humidifier";case"input_boolean":return"on"===t?"mdi:check-circle-outline":"mdi:close-circle-outline";case"input_datetime":if(!e.attributes.has_date)return"mdi:clock";if(!e.attributes.has_time)return"mdi:calendar";break;case"lock":switch(t){case"unlocked":return"mdi:lock-open";case"jammed":return"mdi:lock-alert";case"locking":case"unlocking":return"mdi:lock-clock";default:return"mdi:lock"}case"media_player":switch(e.attributes.device_class){case"speaker":switch(t){case"playing":return"mdi:speaker-play";case"paused":return"mdi:speaker-pause";case"off":return"mdi:speaker-off";default:return"mdi:speaker"}case"tv":switch(t){case"playing":return"mdi:television-play";case"paused":return"mdi:television-pause";case"off":return"mdi:television-off";default:return"mdi:television"}case"receiver":switch(t){case"off":return"mdi:audio-video-off";default:return"mdi:audio-video"}default:switch(t){case"playing":case"paused":return"mdi:cast-connected";case"off":return"mdi:cast-off";default:return"mdi:cast"}}case"number":{const i=domains_number_s(e);if(i)return i;break}case"person":return"not_home"===t?"mdi:account-arrow-right":"mdi:account";case"switch":switch(e.attributes.device_class){case"outlet":return"on"===t?"mdi:power-plug":"mdi:power-plug-off";case"switch":return"on"===t?"mdi:toggle-switch-variant":"mdi:toggle-switch-variant-off";default:return"mdi:toggle-switch-variant"}case"sensor":{const i=sensor_T(e);if(i)return i;break}case"sun":return"above_horizon"===e.state?"mdi:white-balance-sunny":"mdi:weather-night";case"switch_as_x":return"mdi:swap-horizontal";case"threshold":return"mdi:chart-sankey";case"update":return"mdi:package";case"water_heater":return"off"===t?"mdi:water-boiler-off":"mdi:water-boiler";case"weather":return weather_r(e.state)}if(r in constants_i)return constants_i[r]}function index_CzNGKXJS_Ot(r,e){const t=index_CzNGKXJS_rt(r||"unknown",{returnNullIfNotFound:!0});return(0,index_js_eager_.useMemo)(()=>{if(null===t)return null;const d=t.attributes.icon??index_CzNGKXJS_O(computeDomain_m(r),t);return d?/* @__PURE__ */index_BPKUNssF_E(iconify.JO,{style:{fontSize:e?.fontSize??"24px"},icon:d,...e}):null},[t,r,e])}const index_CzNGKXJS_v={throttle:25,returnNullIfNotFound:!1,historyOptions:{hoursToShow:24,significantChangesOnly:!0,minimalResponse:!0,disable:!0}};function index_CzNGKXJS_rt(r,e=index_CzNGKXJS_v){const{throttle:t,returnNullIfNotFound:i,historyOptions:d}={...index_CzNGKXJS_v,...e,historyOptions:{...index_CzNGKXJS_v.historyOptions,...e.historyOptions}},b=useSubscribeEntity_k(r),s=b(i),x=computeDomain_m(r),S=useService_x(x,r),E=useHistory_U(r,d),{useStore:z}=oe(),C=z(o=>o.config?.language),c=(0,index_js_eager_.useCallback)(o=>{const g=/* @__PURE__ */new Date,a=new Date(o.attributes.last_triggered??o.last_updated),m=time_ago_f(a,C),w=Math.abs(g.getTime()-a.getTime()),l="just now"===m,{hexColor:f,rgbColor:T,brightness:F,brightnessValue:$,rgbaColor:j,color:A}=colors_k(o);return{...o,custom:{color:A,relativeTime:m,timeDiff:w,active:l,hexColor:f,rgbColor:T,brightness:F,brightnessValue:$,rgbaColor:j}}},[C]),N=(0,index_module.zl)(o=>{u(c(o))},t,{leading:!0,trailing:!0}),[n,u]=(0,index_js_eager_.useState)(null!==s?c(s):null);return(0,index_js_eager_.useEffect)(()=>{u(o=>null===o?null:c(o))},[c]),(0,index_js_eager_.useEffect)(()=>{const o=b(!0);if(o&&n){const g=diff((0,lodash.omit)(o,"custom","last_changed","last_updated","context","attributes.icon"),(0,lodash.omit)(n,"custom","last_changed","last_updated","context","attributes.icon")),a=(0,lodash.cloneDeep)(o),m="string"==typeof a.attributes.icon,w="string"==typeof n.attributes.icon;let l=!(0,lodash.isEmpty)(g);if(m&&w&&a.attributes.icon!==n.attributes.icon)l=!0;else if(!m){const f=index_CzNGKXJS_O(computeDomain_m(a.entity_id),a);f!==n.attributes.icon&&(a.attributes.icon=f,l=!0)}l&&N(a)}},[n,N,b]),(0,index_js_eager_.useEffect)(()=>{s&&!n&&u(c(s)),!s&&n&&u(null),s&&n&&s.entity_id!==n.entity_id&&u(c(s))},[s,n,c]),(0,index_js_eager_.useMemo)(()=>null===n?null:{...n,history:E,service:S},[n,E,S])}const useLightBrightness_M=t=>(0,index_js_eager_.useMemo)(()=>t.state===entity_A?Math.max(Math.round((t.attributes.brightness??0)*100/255),1):0,[t.attributes.brightness,t.state]);const useLightTemperature_n=r=>(0,index_js_eager_.useMemo)(()=>{if(r.state===entity_A)return r.attributes.color_mode===autogenerated_types_by_domain_r.COLOR_TEMP?r.attributes.color_temp_kelvin:void 0},[r.state,r.attributes.color_mode,r.attributes.color_temp_kelvin]);const useLightColor_L=r=>{const n=(0,index_js_eager_.useMemo)(()=>{if(r.state===entity_A){if(r.attributes.color_mode===autogenerated_types_by_domain_r.RGB&&r.attributes.rgb_color&&!light_u(r,autogenerated_types_by_domain_r.RGBWW)&&!light_u(r,autogenerated_types_by_domain_r.RGBW)){const o=Math.max(...r.attributes.rgb_color);if(o<255)return o}return}},[r]),l=(0,index_js_eager_.useMemo)(()=>{const o=r.state!==entity_A?void 0:r.attributes.color_mode===autogenerated_types_by_domain_r.RGBW&&r.attributes.rgbw_color?Math.round(100*r.attributes.rgbw_color[3]/255):void 0;return null!=o?255*o/100:void 0},[r]),a=(0,index_js_eager_.useMemo)(()=>{const o=r.state!==entity_A?void 0:r.attributes.color_mode===autogenerated_types_by_domain_r.RGBWW&&r.attributes.rgbww_color?Math.round(100*r.attributes.rgbww_color[3]/255):void 0;return null!=o?255*o/100:void 0},[r]),c=(0,index_js_eager_.useMemo)(()=>{const o=r.state!==entity_A?void 0:r.attributes.color_mode===autogenerated_types_by_domain_r.RGBWW&&r.attributes.rgbww_color?Math.round(100*r.attributes.rgbww_color[4]/255):void 0;return null!=o?255*o/100:void 0},[r]),e=light_p(r),i=(0,index_js_eager_.useMemo)(()=>{const o=r.state!==entity_A?void 0:e?Math.round(100*Math.max(...e.slice(0,3))/255):void 0;return null!=o?255*o/100:void 0},[r,e]),m=(0,index_js_eager_.useMemo)(()=>r.state!==entity_A?void 0:e?convert_color_Z(e.slice(0,3)):void 0,[r,e]);return{brightnessAdjusted:n,white:l,coolWhite:a,warmWhite:c,colorBrightness:i,hs:m}};const useLowDevices_O=({blacklist:n=[],whitelist:r=[],min:u=0,max:c=20}={})=>{const{getAllEntities:f}=oe(),[s,d]=(0,index_js_eager_.useState)([]),e=f(),m=(0,index_js_eager_.useRef)(null),a=!(0,lodash.isEqual)(m.current,e),o=(0,index_js_eager_.useMemo)(()=>Object.values(e).filter(t=>{const E="%"===t.attributes.unit_of_measurement&&"battery"===t.attributes.device_class,b=Number(t.state)<=c&&Number(t.state)>=u,h=n.some(i=>t.entity_id.includes(i)),v=0===r.length||r.some(i=>t.entity_id.includes(i));return E&&b&&v&&!h}),[n,e,c,u,r]);return(0,index_js_eager_.useEffect)(()=>{a&&!(0,lodash.isEqual)(o,s)&&d(o),m.current=e},[a,o,s,e]),(0,index_js_eager_.useMemo)(()=>s,[s])};const useDevice_=t=>{const[i,s]=(0,index_js_eager_.useState)(null),{useStore:r}=oe(),e=r(o=>o.connection);return(0,index_js_eager_.useEffect)(()=>{(async()=>{if(!e)return;const n=await e.sendMessagePromise({type:"config/entity_registry/get",entity_id:t});s(n)})()},[e,t]),i};const logbook_M=["counter","proximity","sensor","zone"],logbook_U=(r,a)=>({entity_id:r.entity_id,state:a,attributes:{device_class:r?.attributes.device_class,source_type:r?.attributes.source_type,has_date:r?.attributes.has_date,has_time:r?.attributes.has_time,entity_picture_local:entity_.has(computeDomain_m(r.entity_id))?void 0:r?.attributes.entity_picture_local,entity_picture:entity_.has(computeDomain_m(r.entity_id))?void 0:r?.attributes.entity_picture}}),logbook_D=(r,a,c,s,t,i)=>{if((t||i)&&(!t||0===t.length)&&(!i||0===i.length))return Promise.reject(`${ae("no_matching_entities_found")}, ${ae("no_matching_devices_found")}`);const n={type:"logbook/event_stream",start_time:c,end_time:s};return t?.length&&(n.entity_ids=t),i?.length&&(n.device_ids=i),r.subscribeMessage(g=>a(g),n)},logbook_l={"numeric state of":"logbook_triggered_by_numeric_state_of","state of":"triggered_by_state_of",event:"triggered_by_event",time:"triggered_by_time","time pattern":"triggered_by_time_pattern","Home Assistant stopping":"logbook_triggered_by_homeassistant_stopping","Home Assistant starting":"logbook_triggered_by_homeassistant_starting"},logbook_H=r=>{for(const a in logbook_l)if(r.startsWith(a))return r.replace(a,`${ae(`${logbook_l[a]}`)}`);return r},logbook_P=(r,a,c)=>{switch(c){case"device_tracker":case"person":return"not_home"===r?ae("was_detected_away"):"home"===r?ae("was_detected_at_home"):ae("was_detected_at_state",{search:"{state}",replace:r});case"sun":return"above_horizon"===r?ae("rose"):ae("set");case"binary_sensor":{const s=r===entity_A,t=r===entity_o,i=a.attributes.device_class;switch(i){case"battery":if(s)return ae("was_low");if(t)return ae("was_normal");break;case"connectivity":if(s)return ae("was_connected");if(t)return ae("was_disconnected");break;case"door":case"garage_door":case"opening":case"window":if(s)return ae("was_opened");if(t)return ae("was_closed");break;case"lock":if(s)return ae("was_unlocked");if(t)return ae("was_locked");break;case"plug":if(s)return ae("was_plugged_in");if(t)return ae("was_unplugged");break;case"presence":if(s)return ae("was_detected_at_home");if(t)return ae("was_detected_away");break;case"safety":if(s)return ae("was_unsafe");if(t)return ae("was_safe");break;case"cold":case"gas":case"heat":case"moisture":case"motion":case"occupancy":case"power":case"problem":case"smoke":case"sound":case"vibration":if(s)return ae("detected_device_class",{search:"{device_class}",replace:i});if(t)return ae("cleared_no_device_class_detected",{search:"{device_class}",replace:i});break;case"tamper":if(s)return ae("detected_tampering");if(t)return ae("cleared_tampering");break}break}case"cover":switch(r){case"open":return ae("was_opened");case"opening":return ae("is_opening");case"closing":return ae("is_closing");case"closed":return ae("was_closed")}break;case"event":return ae("detected_an_event");case"lock":switch(r){case"unlocked":return ae("was_unlocked");case"locking":return ae("is_locking");case"unlocking":return ae("is_unlocking");case"locked":return ae("was_locked");case"jammed":return ae("is_jammed")}break}return r===entity_A?ae("turned_on"):r===entity_o?ae("turned_off"):r===entity_t?ae("became_unknown"):r===entity_n?ae("became_unavailable"):ae("changed_to_state",{search:"{state}",replace:a?a.state:r})};const useLogs_H=24,useLogs_g=(f,s)=>new Date(f.getTime()-1e3*s).getTime()/1e3;function useLogs_G(f,s){const{useStore:L}=oe(),[b,O]=(0,index_js_eager_.useState)(void 0),l=L(e=>e.connection),[w,i]=(0,index_js_eager_.useState)([]),n=(0,index_js_eager_.useRef)([]),a=(0,index_js_eager_.useRef)(!1),u=(0,index_js_eager_.useRef)(void 0),c=(0,index_js_eager_.useMemo)(()=>{const e={};return s?.hoursToShow?e.recent=3600*s.hoursToShow:s?.startTime&&s?.endTime?e.range=[s.startTime,s.endTime]:e.recent=3600*useLogs_H,e},[s]),h=(0,index_js_eager_.useCallback)(()=>{const e=/* @__PURE__ */new Date;if("range"in c)return{now:e,startTime:c.range[0],endTime:c.range[1],purgeBeforePythonTime:void 0};if("recent"in c){const o=useLogs_g(e,c.recent);return{now:e,startTime:new Date(1e3*o),endTime:new Date(e.getTime()+31536e6),purgeBeforePythonTime:useLogs_g(e,c.recent)}}throw new Error("Unexpected time specified")},[c]),T=(0,index_js_eager_.useCallback)(e=>n.current?e?n.current.filter(o=>o.when>e):n.current:[],[]),p=(0,index_js_eager_.useCallback)(e=>{const o=c&&"recent"in c?useLogs_g(/* @__PURE__ */new Date,c.recent):void 0,r=[...e.events].reverse();if(!n.current.length){n.current=r,i(r);return}if(!r.length)return;const t=T(o);t.length?r[r.length-1].when>t[0].when?(n.current=r.concat(t),i(n.current)):t[t.length-1].when>r[0].when?(n.current=t.concat(r),i(n.current)):(n.current=t.concat(r).sort((P,R)=>R.when-P.when),i(n.current)):(n.current=r,i(r))},[c,T]);(0,index_js_eager_.useEffect)(()=>()=>{a.current=!1,n.current=[],i([])},[]);const S=(0,index_js_eager_.useCallback)((e,o)=>logbook_D(l,t=>{a.current&&p(t)},o.startTime.toISOString(),o.endTime.toISOString(),[e]).catch(t=>{a.current=!1,t instanceof Error&&O(t.message)}),[l,p]),E=(0,index_module.y1)(async(e,o)=>{if(u.current){const r=await u.current;r&&await r(),u.current=void 0}a.current=!0,u.current=await S(e,o)},100,{leading:!0,trailing:!0});if((0,index_js_eager_.useEffect)(()=>{const e=h();return E(f,e),()=>{a.current=!1,u.current&&u.current()}},[h,E,S,f]),b)throw new Error(b);return(0,index_js_eager_.useMemo)(()=>w,[w])}function useConfig_M(){const{useStore:n}=oe(),o=n(t=>t.connection),[r,i]=(0,index_js_eager_.useState)(null);return(0,index_js_eager_.useEffect)(()=>{if(!o)return;const t=subscribeConfig(o,e=>{i(e)});return()=>{t()}},[o]),(0,index_js_eager_.useMemo)(()=>r,[r])}function useHaStatus_g(){return useConfig_M()?.state??"LOADING"}const helpers_u=288e5,helpers_c=864e5,helpers_d=t=>{if(t&&t?.length&&t?.length>2){const e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<helpers_u}},helpers_f=t=>{if(t&&t?.length&&t?.length>2){const e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<helpers_c}},helpers_n=t=>{if(t?.forecast&&t.forecast.length>2)return helpers_d(t.forecast)?{forecast:t.forecast,type:"hourly"}:helpers_f(t.forecast)?{forecast:t.forecast,type:"twice_daily"}:{forecast:t.forecast,type:"daily"}},helpers_O=(t,e,i)=>{if(void 0===i)return e?.type!==void 0&&e?.forecast&&e?.forecast?.length>2?{forecast:e.forecast,type:e?.type}:helpers_n(t);if("legacy"===i)return helpers_n(t);if(i===e?.type&&e?.forecast&&e?.forecast?.length>2)return{forecast:e.forecast,type:i}},helpers_S=(t,e,i,o)=>t.subscribeMessage(o,{type:"weather/subscribe_forecast",forecast_type:i,entity_id:e}),helpers_C=t=>{const e=[];return supports_feature_r(t.attributes,1)&&e.push("daily"),supports_feature_r(t.attributes,4)&&e.push("twice_daily"),supports_feature_r(t.attributes,2)&&e.push("hourly"),e};function useWeather_J(n,d){const{useStore:h}=oe(),i=h(e=>e.connection),c=index_CzNGKXJS_rt(n),[a,g]=(0,index_js_eager_.useState)(null),[f,v]=(0,index_js_eager_.useState)(null),t=(0,index_js_eager_.useRef)(!1),r=(0,index_js_eager_.useRef)(void 0),{type:b="daily"}=d||{},m=(0,index_js_eager_.useCallback)((e,o)=>helpers_S(i,e,o,s=>{t.current&&v(s)}).catch(s=>{t.current=!1,s instanceof Error&&g(s.message)}),[i]),l=(0,index_module.y1)(async(e,o)=>{if(r.current){const u=await r.current;u&&u(),r.current=void 0}t.current=!0,r.current=await m(e,o)},100,{trailing:!0,leading:!0});if((0,index_js_eager_.useEffect)(()=>(l(n,b),()=>{t.current=!1,r.current&&r.current()}),[b,l,m,n]),a)throw a;return(0,index_js_eager_.useMemo)(()=>{const e=helpers_O(c.attributes,f);return{...c,forecast:e}},[c,f])}const areas_t=e=>e.sendMessagePromise({type:"config/area_registry/list"}),areas_o=(e,r)=>e.subscribeEvents((0,lodash.debounce)(()=>areas_t(e).then(s=>r.setState(s,!0)),500,{leading:!0}),"area_registry_updated"),areas_n=(e,r)=>createCollection("_areaRegistry",areas_t,areas_o,e,r);const entities_s=t=>t.sendMessagePromise({type:"config/entity_registry/list"}),entities_y=(t,e)=>t.subscribeEvents((0,lodash.debounce)(()=>entities_s(t).then(i=>e.setState(i,!0)),500,{leading:!0}),"entity_registry_updated"),entities_g=(t,e)=>createCollection("_entityRegistry",entities_s,entities_y,t,e);const devices_s=e=>e.sendMessagePromise({type:"config/device_registry/list"}),devices_o=(e,t)=>e.subscribeEvents((0,lodash.debounce)(()=>devices_s(e).then(i=>t.setState(i,!0)),500,{leading:!0}),"device_registry_updated"),devices_n=(e,t)=>createCollection("_dr",devices_s,devices_o,e,t);function useAreas_L(){const{useStore:v,joinHassUrl:p,getAllEntities:y}=oe(),[d,_]=(0,index_js_eager_.useState)([]),[o,b]=(0,index_js_eager_.useState)([]),[m,h]=(0,index_js_eager_.useState)([]),s=v(e=>e.connection),a=y();return(0,index_js_eager_.useEffect)(()=>{if(!s)return;const e=areas_n(s,i=>{_(i)}),n=entities_g(s,i=>{h(i)}),r=devices_n(s,i=>{b(i)});return()=>{e(),n(),r()}},[s]),(0,index_js_eager_.useMemo)(()=>d.map(e=>{const n=[],r=[],i=[];for(const t of o)t.area_id===e.area_id&&("service"===t.entry_type?i.push(t):r.push(t));for(const t of m){const c=a[t.entity_id];if(!c||(t.area_id===e.area_id&&n.push(c),!t.device_id))continue;const f=o.find(I=>I.id===t.device_id);if(!f)continue;const A=f.area_id===e.area_id;!t.area_id&&A&&n.push(c)}return{...e,picture:e.picture?p(e.picture):e.picture,devices:r,services:i,entities:n}}),[d,o,p,m,a])}const useTemplate_x=s=>{const{useStore:i}=oe(),o=i(t=>t.connection),[c,n]=(0,index_js_eager_.useState)(null),r=(0,index_js_eager_.useRef)(null),u=(0,index_js_eager_.useMemo)(()=>s,[s]);return(0,index_js_eager_.useEffect)(()=>()=>{try{r.current?.(),r.current=null}catch(t){console.log("Error:",t),r.current=null}},[]),(0,index_js_eager_.useEffect)(()=>{if(!o)return;const t=e=>{e?.result&&n(l=>l===e.result?l:e.result)},a=e=>{e?.code==="template_error"?n(e.error):n(e?.error||"Could not process template request.")};o.subscribeMessage(t,{type:"render_template",...u}).then(e=>{r.current=e}).catch(e=>{a(e)})},[o,u]),(0,index_js_eager_.useMemo)(()=>c,[c])};const constants_=640,constants_A=.5625,constants_T=[1,2,3,4,6,8],constants_E=1,constants_R=2,constants_t="hls",constants_c="web_rtc";const time_cache_entity_promise_r={},time_cache_entity_promise_u=async(o,m,i,a,t,...p)=>{const c=Date.now(),s=`${o}-${t}`,e=time_cache_entity_promise_r[s];if(e&&c-e.timestamp<m)return e.promise;const n=i(a,t,...p);return time_cache_entity_promise_r[s]={timestamp:c,promise:n},n};const camera_n=(t,e)=>t.sendMessagePromise({type:"auth/sign_path",path:e}),camera_o=(t,e,a)=>`${t}&width=${e}&height=${a}`,camera_u=t=>`/api/camera_proxy_stream/${t.entity_id}?token=${t.attributes.access_token}`,camera_d=async(t,e,a,r)=>{const s=await time_cache_entity_promise_u("_cameraTmbUrl",9e3,camera_m,t,e);return camera_o(s,a,r)},camera_m=async(t,e)=>{const{path:a}=await camera_n(t,`/api/camera_proxy/${e}`);return a},camera_=async(t,e,a)=>{const r={type:"camera/stream",entity_id:e};a&&(r.format=a);const{url:s}=await t.sendMessagePromise(r);return s};function useCamera_se(A,t){const e=index_CzNGKXJS_rt(A),{useStore:C,joinHassUrl:s}=oe(),a=C(r=>r.connection),c=(0,index_js_eager_.useRef)(!1),f=(0,index_js_eager_.useRef)(!1),[p,b]=(0,index_js_eager_.useState)(void 0),[E,L]=(0,index_js_eager_.useState)(void 0),[o,W]=(0,index_js_eager_.useState)(void 0),[h,x]=(0,index_js_eager_.useState)(void 0),[_,m]=(0,index_js_eager_.useState)(t?.stream!==!1),[S,l]=(0,index_js_eager_.useState)(t?.poster!==!1),U=(0,index_js_eager_.useMemo)(()=>s(camera_u(e)),[e,s]),i=(0,index_js_eager_.useCallback)(async()=>{if(t?.poster!==!1&&a&&!entity_l(e.state)&&!f.current){f.current=!0,l(!0);try{const r=Math.ceil((t?.imageWidth??constants_)*devicePixelRatio),P=Math.ceil(r*(t?.aspectRatio??constants_A)),y=await camera_d(a,e.entity_id,r,P);b(s(y)),l(!1)}catch(r){l(!1),r instanceof Error&&x(r)}}},[e.entity_id,s,e.state,a,t?.poster,t?.aspectRatio,t?.imageWidth]),u=(0,index_js_eager_.useCallback)(async()=>{if(t?.stream!==!1&&a&&!entity_l(e.state)&&!c.current){c.current=!0,m(!0);try{const r=await camera_(a,e.entity_id);L(s(r)),m(!1)}catch(r){m(!1),console.error(r),r instanceof Error&&W(r)}}},[e.entity_id,s,e.state,a,t?.stream]),g=(0,index_js_eager_.useCallback)(()=>o||!supports_feature_r(e.attributes,constants_R)?!0:e.attributes.frontend_stream_type===constants_c?typeof RTCPeerConnection>"u":!1,[e.attributes,o]);return(0,index_js_eager_.useEffect)(()=>{u(),i()},[u,i]),(0,index_js_eager_.useMemo)(()=>({...e,stream:{url:E,loading:_,error:o,refresh:async()=>(c.current=!1,u())},poster:{url:p,loading:S,error:h,refresh:async()=>(f.current=!1,i())},mjpeg:{url:U,shouldRenderMJPEG:g()}}),[e,E,g,_,o,u,p,S,h,U,i])}}}]);